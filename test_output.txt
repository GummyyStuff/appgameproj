bun test v1.2.19 (aad3abea)

packages/backend/src/services/case-opening-performance.test.ts:

# Unhandled error between tests
-------------------------------
112 |       effective_value: 25000
113 |     }
114 |   ]
115 | 
116 |   describe('Single Operation Performance', () => {
117 |     test('should complete single case opening within performance threshold', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:117:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:116:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
170 |       console.log(`Last batch avg: ${lastAvg.toFixed(2)}ms`)
171 |     })
172 |   })
173 | 
174 |   describe('Concurrent User Load Testing', () => {
175 |     test('should handle moderate concurrent case openings', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:175:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:174:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
295 |       })
296 |     }, 30000) // 30 second timeout for high load test
297 |   })
298 | 
299 |   describe('Memory and Resource Usage', () => {
300 |     test('should not leak memory during extended operations', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:300:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:299:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
385 |       console.log(`Max time: ${maxTime.toFixed(2)}ms`)
386 |     })
387 |   })
388 | 
389 |   describe('Value Calculation Performance', () => {
390 |     test('should calculate item values efficiently at scale', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:390:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:389:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
428 |       console.log(`Average per calculation: ${avgTimePerCalculation.toFixed(4)}ms`)
429 |     })
430 |   })
431 | 
432 |   describe('Stress Testing', () => {
433 |     test('should survive extreme load conditions', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:433:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:432:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-performance.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-comprehensive.test.ts:

# Unhandled error between tests
-------------------------------
126 |       effective_value: 25000
127 |     }
128 |   ]
129 | 
130 |   describe('End-to-End Case Opening Workflow', () => {
131 |     test('should complete full case opening workflow with monitoring', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:131:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:130:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
207 |       expect(true).toBe(true) // Test passed if we reach here without errors
208 |     })
209 |   })
210 | 
211 |   describe('Performance Under Load', () => {
212 |     test('should maintain performance under concurrent load with monitoring', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:212:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:211:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
289 |       console.log('Rarity distribution:', rarityCount)
290 |     }, 10000) // 10 second timeout
291 |   })
292 | 
293 |   describe('Statistical Validation with Monitoring', () => {
294 |     test('should maintain statistical fairness over large sample with monitoring', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:294:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:293:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
369 |       console.log(`Performance: avg=${avgTime.toFixed(2)}ms, min=${minTime.toFixed(2)}ms, max=${maxTime.toFixed(2)}ms`)
370 |     }, 15000) // 15 second timeout
371 |   })
372 | 
373 |   describe('Currency Transaction Integration', () => {
374 |     test('should handle currency transactions with monitoring', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:374:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:373:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
421 |       expect(true).toBe(true) // Test passed if we reach here without errors
422 |     })
423 |   })
424 | 
425 |   describe('Error Handling and Recovery', () => {
426 |     test('should handle and monitor various error scenarios', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:426:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:425:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
477 |       }
478 |     })
479 |   })
480 | 
481 |   describe('System Health Integration', () => {
482 |     test('should provide comprehensive system health data', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:482:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:481:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-comprehensive.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/currency.test.ts:

# Unhandled error between tests
-------------------------------
11 | 
12 | import { CurrencyService } from './currency'
13 | 
14 | describe('CurrencyService Static Methods', () => {
15 |   describe('formatCurrency', () => {
16 |     test('should format roubles correctly', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:16:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:15:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:14:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
44 |       expect(CurrencyService.formatCurrency(0.1)).toBe('â‚½0.1')
45 |     })
46 |   })
47 | 
48 |   describe('getStartingBalance', () => {
49 |     test('should return configured starting balance', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:49:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:48:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:14:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
50 |       expect(CurrencyService.getStartingBalance()).toBe(10000)
51 |     })
52 |   })
53 | 
54 |   describe('getDailyBonusAmount', () => {
55 |     test('should return configured daily bonus amount', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:55:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:54:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:14:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
58 |   })
59 | })
60 | 
61 | describe('CurrencyService Validation Logic', () => {
62 |   describe('Balance validation logic', () => {
63 |     test('should validate positive amounts', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:63:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:62:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:61:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
78 |       }).toThrow('Required amount must be positive')
79 |     })
80 |   })
81 | 
82 |   describe('Daily bonus cooldown logic', () => {
83 |     test('should calculate cooldown correctly', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:83:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:82:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:61:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
105 |              (today.getDate() === new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate() && tomorrow.getDate() === 1)).toBe(true)
106 |     })
107 |   })
108 | 
109 |   describe('Transaction validation logic', () => {
110 |     test('should validate bet amounts', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:110:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:109:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/currency.test.ts:61:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-monitoring.test.ts:
(pass) Case Opening Monitoring Service > Operation Recording > should record successful operations
104 |           case_type_id: 'test-case',
105 |           error_message: 'Test error'
106 |         }
107 |       )
108 | 
109 |       expect(console.error).toHaveBeenCalledWith(
                                  ^
error: expect(received).toHaveBeenCalledWith(expected)

Number of calls: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:109:29)
(fail) Case Opening Monitoring Service > Operation Recording > should record failed operations [1.00ms]
(pass) Case Opening Monitoring Service > Operation Recording > should calculate duration correctly
(pass) Case Opening Monitoring Service > Case Opening Specific Recording > should record case opening start
155 |         'legendary',
156 |         5000,
157 |         'opening-789'
158 |       )
159 | 
160 |       expect(console.log).toHaveBeenCalledWith(
                                ^
error: expect(received).toHaveBeenCalledWith(expected)

Number of calls: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:160:27)
(fail) Case Opening Monitoring Service > Case Opening Specific Recording > should record successful case opening
176 |         'user-123',
177 |         'case-456',
178 |         'Insufficient balance'
179 |       )
180 | 
181 |       expect(console.error).toHaveBeenCalledWith(
                                  ^
error: expect(received).toHaveBeenCalledWith(expected)

Number of calls: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:181:29)
(fail) Case Opening Monitoring Service > Case Opening Specific Recording > should record failed case opening
(pass) Case Opening Monitoring Service > Performance Metrics > should calculate performance metrics correctly
(pass) Case Opening Monitoring Service > Performance Metrics > should handle empty metrics gracefully
(pass) Case Opening Monitoring Service > Performance Metrics > should handle database errors gracefully [1.00ms]
308 |       })
309 | 
310 |       const fairnessMetrics = await CaseOpeningMonitoringService.getFairnessMetrics('test-case')
311 | 
312 |       expect(fairnessMetrics).toBeDefined()
313 |       expect(fairnessMetrics?.total_openings).toBe(100)
                                                    ^
error: expect(received).toBe(expected)

Expected: 100
Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:313:47)
(fail) Case Opening Monitoring Service > Fairness Metrics > should calculate fairness metrics correctly
(pass) Case Opening Monitoring Service > Fairness Metrics > should handle missing case type gracefully
358 | 
359 |       expect(health.status).toBe('healthy')
360 |       expect(health.metrics.success_rate).toBe(100)
361 |       expect(health.metrics.error_rate).toBe(0)
362 |       expect(health.metrics.avg_response_time).toBe(66.25) // (50+75+60+80)/4
363 |       expect(health.issues).toHaveLength(0)
                                  ^
error: expect(received).toHaveLength(expected)

Expected length: 0
Received length: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:363:29)
(fail) Case Opening Monitoring Service > System Health > should report healthy system [1.00ms]
(pass) Case Opening Monitoring Service > System Health > should report degraded system with high response time
(pass) Case Opening Monitoring Service > System Health > should report unhealthy system with high error rate
(pass) Case Opening Monitoring Service > System Health > should handle database errors in health check
(pass) Case Opening Monitoring Service > Logging Functions > should log critical errors
(pass) Case Opening Monitoring Service > Logging Functions > should log warnings
(pass) Case Opening Monitoring Service > Logging Functions > should log info messages
(pass) Case Opening Monitoring Service > Dashboard Data > should compile dashboard data successfully [1.00ms]
(pass) Case Opening Monitoring Service > Currency Transaction Recording > should record successful currency transactions
556 |         1000,
557 |         false,
558 |         'Insufficient balance'
559 |       )
560 | 
561 |       expect(console.error).toHaveBeenCalledWith(
                                  ^
error: expect(received).toHaveBeenCalledWith(expected)

Number of calls: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:561:29)
(fail) Case Opening Monitoring Service > Currency Transaction Recording > should record failed currency transactions
(pass) Case Opening Monitoring Service > Database Operation Recording > should record database operations
600 |         false,
601 |         undefined,
602 |         'Connection timeout'
603 |       )
604 | 
605 |       expect(console.error).toHaveBeenCalledWith(
                                  ^
error: expect(received).toHaveBeenCalledWith(expected)

Number of calls: 1

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring.test.ts:605:29)
(fail) Case Opening Monitoring Service > Database Operation Recording > should record failed database operations

packages/backend/src/services/statistics-integration.test.ts:
(pass) Statistics Integration Tests > Statistics Service Integration > should have all required methods [1.00ms]
(pass) Statistics Integration Tests > Statistics Service Integration > should return consistent empty statistics structure
(pass) Statistics Integration Tests > Statistics Service Integration > should handle edge cases gracefully [1.00ms]
(pass) Statistics Integration Tests > Database Service Integration > should have all required methods for statistics
(pass) Statistics Integration Tests > Type Safety > should maintain type safety across all statistics methods
(pass) Statistics Integration Tests > Data Consistency > should maintain data consistency across different calculation methods

packages/backend/src/services/case-opening-currency.test.ts:

# Unhandled error between tests
-------------------------------
17 | import { CaseOpeningService, type CaseType, type CaseOpeningResult } from './case-opening'
18 | 
19 | describe('Case Opening Currency Transaction Tests', () => {
20 | 
21 |   describe('Balance Validation Logic', () => {
22 |     test('should correctly validate sufficient balance', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:22:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:21:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
92 |       })
93 |     })
94 |   })
95 | 
96 |   describe('Transaction Atomicity Simulation', () => {
97 |     test('should simulate atomic transaction behavior', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:97:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:96:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
221 |       expect(result.finalBalance).toBe(1300)
222 |     })
223 |   })
224 | 
225 |   describe('Currency Calculation Validation', () => {
226 |     test('should validate currency calculations for different scenarios', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:226:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:225:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
315 |       })
316 |     })
317 |   })
318 | 
319 |   describe('Transaction History Validation', () => {
320 |     test('should validate game history entry structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:320:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:319:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
462 |       expect(stats.rarityBreakdown.legendary).toBe(1)
463 |     })
464 |   })
465 | 
466 |   describe('Balance Consistency Validation', () => {
467 |     test('should maintain balance consistency across multiple operations', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:467:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:466:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-currency.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/database.test.ts:

# Unhandled error between tests
-------------------------------
15 | process.env.STARTING_BALANCE = '10000'
16 | process.env.DAILY_BONUS = '1000'
17 | 
18 | describe('DatabaseService', () => {
19 |   describe('Static Methods', () => {
20 |     test('should have all required methods', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:20:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:19:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
33 |       expect(typeof DatabaseService.canClaimDailyBonus).toBe('function')
34 |     })
35 |   })
36 | 
37 |   describe('User Profile Operations', () => {
38 |     test('should validate user profile structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:38:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:37:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
64 |       expect(typeof mockProfile.is_active).toBe('boolean')
65 |     })
66 |   })
67 | 
68 |   describe('Balance Operations', () => {
69 |     test('should validate balance update parameters', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:69:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:68:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
120 |       }
121 |     })
122 |   })
123 | 
124 |   describe('Game History Operations', () => {
125 |     test('should validate game history record structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:125:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:124:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
182 |       }
183 |     })
184 |   })
185 | 
186 |   describe('Statistics Operations', () => {
187 |     test('should validate statistics query parameters', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:187:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:186:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
211 |       }
212 |     })
213 |   })
214 | 
215 |   describe('Daily Bonus Operations', () => {
216 |     test('should validate daily bonus logic', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:216:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:215:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
241 |       expect(isFinite(bonusAmount)).toBe(true)
242 |     })
243 |   })
244 | 
245 |   describe('Leaderboard Operations', () => {
246 |     test('should validate leaderboard query parameters', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:246:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:245:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
270 |       }
271 |     })
272 |   })
273 | 
274 |   describe('Error Handling', () => {
275 |     test('should handle database connection errors gracefully', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:275:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:274:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
304 |       }
305 |     })
306 |   })
307 | 
308 |   describe('Data Consistency', () => {
309 |     test('should maintain referential integrity', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:309:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:308:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/database.test.ts:18:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-monitoring-simple.test.ts:

# Unhandled error between tests
-------------------------------
30 |     // Restore console
31 |     console = originalConsole
32 |   })
33 | 
34 |   describe('Logging Functions', () => {
35 |     test('should format critical error logs correctly', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:35:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:34:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
 97 |       )
 98 |     })
 99 |   })
100 | 
101 |   describe('Operation Recording', () => {
102 |     test('should record successful operations with correct format', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:102:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:101:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
169 |       performance.now = originalPerformanceNow
170 |     })
171 |   })
172 | 
173 |   describe('Case Opening Specific Recording', () => {
174 |     test('should record case opening start correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:174:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:173:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
256 |       performance.now = originalPerformanceNow
257 |     })
258 |   })
259 | 
260 |   describe('Duration Calculation', () => {
261 |     test('should calculate duration correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:261:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:260:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
300 |       performance.now = originalPerformanceNow
301 |     })
302 |   })
303 | 
304 |   describe('Currency Transaction Recording', () => {
305 |     test('should record successful currency transactions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:305:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:304:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
368 |       performance.now = originalPerformanceNow
369 |     })
370 |   })
371 | 
372 |   describe('Database Operation Recording', () => {
373 |     test('should record successful database operations', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:373:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:372:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-monitoring-simple.test.ts:17:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/statistics.test.ts:

# Unhandled error between tests
-------------------------------
57 |       }
58 |     ]
59 |   })
60 | 
61 |   describe('calculateOverviewStatistics', () => {
62 |     test('should calculate correct overview statistics', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:62:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:61:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
105 |       expect(stats.profitMargin).toBe(100)
106 |     })
107 |   })
108 | 
109 |   describe('calculateGameTypeBreakdown', () => {
110 |     test('should calculate breakdown for all game types', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:110:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:109:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
156 |       })
157 |     })
158 |   })
159 | 
160 |   describe('calculateTimeSeriesData', () => {
161 |     test('should group games by date correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:161:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:160:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
195 |       expect(timeSeries).toHaveLength(0)
196 |     })
197 |   })
198 | 
199 |   describe('calculateWinStreaks', () => {
200 |     test('should calculate win streaks correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:200:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:199:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
248 |       expect(streaks.longestLoss).toBe(0)
249 |     })
250 |   })
251 | 
252 |   describe('calculateBetPatterns', () => {
253 |     test('should identify most common bet amount', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:253:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:252:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
280 |       expect(patterns.betDistribution).toHaveLength(0)
281 |     })
282 |   })
283 | 
284 |   describe('calculatePlayingHabits', () => {
285 |     test('should identify most active hour and day', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:285:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:284:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
309 |       expect(habits.totalPlayTime).toBe(0)
310 |     })
311 |   })
312 | 
313 |   describe('calculateSessions', () => {
314 |     test('should group games into sessions correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:314:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:313:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
347 |       expect(sessions).toHaveLength(0)
348 |     })
349 |   })
350 | 
351 |   describe('getEmptyStatistics', () => {
352 |     test('should return properly structured empty statistics', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:352:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:351:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
367 |       expect(emptyStats.playingHabits.mostActiveHour).toBe(0)
368 |     })
369 |   })
370 | 
371 |   describe('getEmptyGameStatistics', () => {
372 |     test('should return properly structured empty game statistics', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:372:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:371:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
384 |       expect(emptyGameStats.profitMargin).toBe(0)
385 |     })
386 |   })
387 | 
388 |   describe('Edge Cases and Error Handling', () => {
389 |     test('should handle games with zero bet amounts', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:389:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:388:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/statistics.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-integration.test.ts:

# Unhandled error between tests
-------------------------------
16 | 
17 | import { CaseOpeningService, type CaseType, type TarkovItem, type WeightedItem } from './case-opening'
18 | 
19 | describe('Case Opening Service Integration', () => {
20 |   describe('Complete Case Opening Workflow', () => {
21 |     test('should demonstrate complete case opening logic flow', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:21:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:20:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
262 |       expect(netResult).toBe(250) // Profit of 250
263 |     })
264 |   })
265 | 
266 |   describe('API Endpoint Structure Validation', () => {
267 |     test('should validate GET /api/games/cases response structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:267:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:266:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-integration.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-fairness.test.ts:

# Unhandled error between tests
-------------------------------
112 |         value_multiplier: 2.5,
113 |         effective_value: 25000
114 |       }
115 |     ]
116 | 
117 |     test('should maintain statistical distribution over large sample size', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:117:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:21:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
260 |       console.log(`Test result: ${chiSquare < criticalValue ? 'PASS' : 'FAIL'}`)
261 |     }, 20000)
262 |   })
263 | 
264 |   describe('Weighted Item Selection Fairness', () => {
265 |     test('should respect item weights within same rarity', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:265:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:264:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
337 |       console.log(`Heavy Item: ${heavyPercentage.toFixed(2)}% (expected: 75%)`)
338 |     })
339 |   })
340 | 
341 |   describe('Edge Case Fairness Tests', () => {
342 |     test('should handle extreme rarity distributions correctly', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:342:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:341:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
460 |       }
461 |     })
462 |   })
463 | 
464 |   describe('Value Calculation Fairness', () => {
465 |     test('should apply value multipliers consistently', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:465:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:464:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
511 |       }
512 |     })
513 |   })
514 | 
515 |   describe('Randomness Quality Tests', () => {
516 |     test('should pass basic randomness tests', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:516:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:515:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-fairness.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening.test.ts:

# Unhandled error between tests
-------------------------------
17 | import { CaseOpeningService, type CaseType, type TarkovItem, type WeightedItem, type ItemRarity } from './case-opening'
18 | 
19 | describe('Case Opening Service', () => {
20 | 
21 |   describe('Item Value Calculation', () => {
22 |     test('should calculate correct item value with multiplier', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:22:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:21:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
83 |       expect(result).toBe(25000)
84 |     })
85 |   })
86 | 
87 |   describe('Rarity Distribution Logic', () => {
88 |     test('should select correct rarity based on probability distribution', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:88:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:87:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
160 |       expect(invalidTotal).toBe(90) // Should not equal 100
161 |     })
162 |   })
163 | 
164 |   describe('Weighted Item Selection Logic', () => {
165 |     test('should select items based on weight distribution', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:165:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:164:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
312 |       expect(totalWeight).toBe(1.0) // Only the normal item should contribute to weight
313 |     })
314 |   })
315 | 
316 |   describe('Opening ID Generation', () => {
317 |     test('should generate unique opening IDs', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:317:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:316:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
362 |       expect(extractedTimestamp).toBeLessThanOrEqual(afterTime)
363 |     })
364 |   })
365 | 
366 |   describe('Validation Logic', () => {
367 |     test('should validate balance calculation logic', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:367:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:366:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
408 |       expect(validateItemPool(null)).toEqual({ isValid: false, error: 'No items available' })
409 |     })
410 |   })
411 | 
412 |   describe('Provably Fair Algorithm Logic', () => {
413 |     test('should demonstrate rarity selection algorithm', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:413:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:412:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
485 |       expect(selectWeightedItem(0.9).name).toBe('Item C') // 90% of 4 = 3.6, should select Item C
486 |     })
487 |   })
488 | 
489 |   describe('Statistics Calculation Logic', () => {
490 |     test('should calculate case opening statistics correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:490:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:489:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening.test.ts:19:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/case-opening-unit.test.ts:

# Unhandled error between tests
-------------------------------
 5 | 
 6 | import { describe, it, expect } from 'bun:test'
 7 | 
 8 | describe('Case Opening Core Algorithms', () => {
 9 |   describe('Item Value Calculation', () => {
10 |     test('should calculate correct item value with multiplier', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:10:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:9:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
18 |       expect(calculateItemValue(10000, 2.5)).toBe(25000)
19 |     })
20 |   })
21 | 
22 |   describe('Rarity Distribution Algorithm', () => {
23 |     test('should select correct rarity based on probability distribution', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:23:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:22:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
88 |       expect(selectRarity(0.99)).toBe('legendary')
89 |     })
90 |   })
91 | 
92 |   describe('Weighted Item Selection Algorithm', () => {
93 |     test('should select items based on weight distribution', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:93:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:92:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
146 |       expect(selectWeightedItem(0.9).name).toBe('Only Item')
147 |     })
148 |   })
149 | 
150 |   describe('Opening ID Generation', () => {
151 |     test('should generate unique opening IDs', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:151:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:150:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
176 |       expect(id).toMatch(/^case_\d+_user123$/)
177 |     })
178 |   })
179 | 
180 |   describe('Validation Logic', () => {
181 |     test('should validate balance calculation logic', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:181:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:180:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
208 |       expect(validateCaseType(null)).toEqual({ isValid: false, error: 'Case type not found' })
209 |     })
210 |   })
211 | 
212 |   describe('Statistics Calculation Logic', () => {
213 |     test('should calculate case opening statistics correctly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:213:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:212:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
272 |       expect(stats.rarity_breakdown.common).toBe(1)
273 |     })
274 |   })
275 | 
276 |   describe('Provably Fair Algorithm Properties', () => {
277 |     test('should demonstrate deterministic behavior with same inputs', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:277:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:276:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/case-opening-unit.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/security-core.test.ts:

# Unhandled error between tests
-------------------------------
1 | import { describe, it, expect } from 'bun:test'
2 | import { InputSanitizer, ThreatDetector } from '../middleware/validation'
3 | 
4 | describe('Security Core Functions', () => {
5 |   describe('InputSanitizer', () => {
6 |     test('should sanitize strings', () => {
        ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:6:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:5:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:4:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
54 |       expect(sanitized.array[1]).toBe('item2')
55 |     })
56 |   })
57 | 
58 |   describe('ThreatDetector', () => {
59 |     test('should detect SQL injection attempts', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:59:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:58:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-core.test.ts:4:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/blackjack-request.test.ts:

# Unhandled error between tests
-------------------------------
12 |   action: commonSchemas.blackjackAction,
13 |   handIndex: z.number().int().min(0).max(3).optional()
14 | })
15 | 
16 | describe('Blackjack Request Validation', () => {
17 |   test('should validate the exact request from frontend', () => {
       ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/blackjack-request.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/blackjack-request.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/blackjack-validation.test.ts:

# Unhandled error between tests
-------------------------------
3 | 
4 | // Test the updated gameId validation schema
5 | const gameIdSchema = z.string().min(10).max(200).regex(/^[a-zA-Z0-9\-_]+$/, 'Invalid game ID format')
6 | 
7 | describe('Blackjack Game ID Validation', () => {
8 |   test('should accept blackjack game ID format', () => {
      ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/blackjack-validation.test.ts:8:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/blackjack-validation.test.ts:7:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/performance.test.ts:

# Unhandled error between tests
-------------------------------
15 |   beforeEach(() => {
16 |     gameEngine = new CoreGameEngine()
17 |   })
18 | 
19 |   describe('Concurrent Game Processing', () => {
20 |     test('should handle multiple concurrent roulette games', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:20:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:19:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
129 |       expect(secondHalfAvg).toBeLessThan(firstHalfAvg * 1.5)
130 |     })
131 |   })
132 | 
133 |   describe('Memory Usage Testing', () => {
134 |     test('should not leak memory during extended game sessions', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:134:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:133:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
195 |       expect(finalStats.activeGames).toBeLessThanOrEqual(initialStats.activeGames)
196 |     })
197 |   })
198 | 
199 |   describe('Database Performance', () => {
200 |     test('should handle concurrent balance updates efficiently', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:200:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:199:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
282 |       expect(secondHalfAvg).toBeLessThan(firstHalfAvg * 1.5)
283 |     })
284 |   })
285 | 
286 |   describe('Currency Operations Performance', () => {
287 |     test('should format currency efficiently for large datasets', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:287:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:286:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
342 |       expect(totalTime).toBeLessThan(500) // Less than 500ms for 10k validations
343 |     })
344 |   })
345 | 
346 |   describe('Random Number Generation Performance', () => {
347 |     test('should generate random numbers efficiently', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:347:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:346:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
403 |       expect(avgTimePerResult).toBeLessThan(20) // Less than 20ms per result on average
404 |     })
405 |   })
406 | 
407 |   describe('Stress Testing', () => {
408 |     test('should handle burst traffic patterns', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:408:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:407:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
476 |       expect(throughput).toBeGreaterThan(10) // At least 10 requests per second
477 |     })
478 |   })
479 | 
480 |   describe('Resource Utilization', () => {
481 |     test('should monitor CPU usage during intensive operations', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:481:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:480:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/performance.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/security-standalone.test.ts:

# Unhandled error between tests
-------------------------------
89 |   }
90 | }
91 | 
92 | describe('Security Hardening - Standalone Tests', () => {
93 |   describe('Input Sanitization', () => {
94 |     test('should sanitize strings by removing control characters', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:94:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:93:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:92:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
130 |       expect(sanitized.length).toBe(10000)
131 |     })
132 |   })
133 | 
134 |   describe('Threat Detection', () => {
135 |     test('should detect SQL injection patterns', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:135:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:134:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:92:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
265 |       expect(TestThreatDetector.analyzeInput('123')).toEqual([])
266 |     })
267 |   })
268 | 
269 |   describe('Rate Limiting Logic', () => {
270 |     test('should implement basic rate limiting logic', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:270:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:269:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:92:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
302 |       expect(checkRateLimit(key)).toBe(false)
303 |     })
304 |   })
305 | 
306 |   describe('Session Management Logic', () => {
307 |     test('should implement basic session validation', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:307:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:306:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:92:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
360 |     })
361 |   })
362 | })
363 | 
364 | describe('Security Integration', () => {
365 |   test('should demonstrate complete security pipeline', () => {
        ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:365:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-standalone.test.ts:364:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/game-fairness.test.ts:

# Unhandled error between tests
-------------------------------
 9 | import { BlackjackGame } from '../services/game-engine/blackjack-game'
10 | import type { ProvablyFairSeed } from '../services/game-engine/types'
11 | 
12 | describe('Game Fairness Testing', () => {
13 |   describe('Random Number Generation Fairness', () => {
14 |     test('should pass chi-square test for uniform distribution', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:14:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:13:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
121 |       }
122 |     })
123 |   })
124 | 
125 |   describe('Roulette Fairness Testing', () => {
126 |     test('should have correct theoretical return to player (RTP)', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:126:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:125:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
219 |       }
220 |     })
221 |   })
222 | 
223 |   describe('Blackjack Fairness Testing', () => {
224 |     test('should have correct basic strategy expected values', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:224:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:223:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
336 |     })
337 |   })
338 | 
339 | 
340 |   describe('Cross-Game Consistency', () => {
341 |     test('should maintain consistent random seed behavior across games', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:341:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:340:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
373 |       }
374 |     })
375 |   })
376 | 
377 |   describe('Statistical Validation', () => {
378 |     test('should pass Kolmogorov-Smirnov test for uniform distribution', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:378:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:377:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/game-fairness.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/test-utils/security-hardening.test.ts:

# Unhandled error between tests
-------------------------------
32 |         blockDurationMs: 2000
33 |       }))
34 |       app.get('/test', (c) => c.json({ success: true }))
35 |     })
36 | 
37 |     test('should allow requests within limit', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:37:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:23:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
77 |     })
78 |   })
79 | 
80 |   describe('Input Validation and Sanitization', () => {
81 |     describe('InputSanitizer', () => {
82 |       test('should sanitize strings', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:82:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:81:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:80:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
130 |         expect(sanitized.array[1]).toBe('item2')
131 |       })
132 |     })
133 | 
134 |     describe('ThreatDetector', () => {
135 |       test('should detect SQL injection attempts', () => {
            ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:135:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:134:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:80:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
224 |           const data = c.get('validatedData')
225 |           return c.json({ success: true, data })
226 |         })
227 |       })
228 | 
229 |       test('should validate and sanitize valid input', async () => {
            ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:229:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:208:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:80:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
284 |       })
285 |     })
286 |   })
287 | 
288 |   describe('Audit Logging', () => {
289 |     test('should log audit events', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:289:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:288:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
337 |     beforeEach(() => {
338 |       // Clear sessions before each test
339 |       sessionManager.destroy()
340 |     })
341 | 
342 |     test('should register and validate sessions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:342:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:336:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
415 |   describe('IP Security', () => {
416 |     beforeEach(() => {
417 |       ipSecurityManager.destroy()
418 |     })
419 | 
420 |     test('should track IP violations', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:420:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:415:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
453 |       app = new Hono()
454 |       app.use('*', securityHeadersMiddleware())
455 |       app.get('/test', (c) => c.json({ success: true }))
456 |     })
457 | 
458 |     test('should add security headers', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:458:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:448:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
504 |       const data = c.get('validatedData')
505 |       return c.json({ success: true, data })
506 |     })
507 |   })
508 | 
509 |   test('should apply full security stack', async () => {
        ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:509:3)
      at /home/juan/random/appgameproj/packages/backend/src/test-utils/security-hardening.test.ts:483:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/database/database.test.ts:
(pass) Database Types and Validation > should validate game types correctly
(pass) Database Types and Validation > should validate bet amounts correctly
(pass) Database Service Validation > should validate input parameters correctly [1.00ms]
(pass) Game Result Data Types > should accept valid roulette result data
(pass) Game Result Data Types > should accept valid blackjack result data
(skip) Database Integration > should connect to database
(skip) Database Integration > should create and retrieve user profile
(skip) Database Integration > should process game transactions atomically

packages/backend/src/integration/currency-api.test.ts:

# Unhandled error between tests
-------------------------------
 9 | process.env.STARTING_BALANCE = '10000'
10 | process.env.DAILY_BONUS = '1000'
11 | 
12 | describe('Currency API Integration', () => {
13 |   describe('API Endpoint Validation', () => {
14 |     test('should validate balance request parameters', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:14:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:13:3)
      at /home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
175 |       expect(response.stats.games_played).toBe(100)
176 |     })
177 |   })
178 | 
179 |   describe('Error Handling', () => {
180 |     test('should handle currency service errors appropriately', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:180:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:179:3)
      at /home/juan/random/appgameproj/packages/backend/src/integration/currency-api.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/blackjack.test.ts:

# Unhandled error between tests
-------------------------------
13 |     app = new Hono()
14 |     app.route('/api/games', gameRoutes)
15 |   })
16 | 
17 |   describe('GET /api/games/blackjack', () => {
18 |     test('should return blackjack game information', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:18:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
31 |       expect(data.max_bet).toBe(10000)
32 |     })
33 |   })
34 | 
35 |   describe('POST /api/games/blackjack/start', () => {
36 |     test('should require authentication', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:36:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:35:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
54 |       expect(true).toBe(true) // Placeholder
55 |     })
56 |   })
57 | 
58 |   describe('POST /api/games/blackjack/action', () => {
59 |     test('should require authentication', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:59:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:58:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/blackjack.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/user.test.ts:

# Unhandled error between tests
-------------------------------
 8 | process.env.JWT_SECRET = 'test-jwt-secret'
 9 | process.env.STARTING_BALANCE = '10000'
10 | process.env.DAILY_BONUS = '1000'
11 | 
12 | describe('User API Validation', () => {
13 |   test('should validate profile update input correctly', async () => {
       ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/user.test.ts:13:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/user.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/games.test.ts:

# Unhandled error between tests
-------------------------------
19 |   beforeEach(() => {
20 |     app = new Hono()
21 |   })
22 | 
23 |   describe('POST /api/games/roulette/bet', () => {
24 |     test('should validate roulette bet request structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:24:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:23:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
131 |       }
132 |     })
133 |   })
134 | 
135 |   describe('POST /api/games/blackjack/start', () => {
136 |     test('should validate blackjack start request', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:136:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:135:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
162 |       }
163 |     })
164 |   })
165 | 
166 |   describe('POST /api/games/blackjack/action', () => {
167 |     test('should validate blackjack action request', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:167:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:166:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
196 |       }
197 |     })
198 |   })
199 | 
200 |   describe('Game Response Validation', () => {
201 |     test('should validate roulette game response structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:201:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:200:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
257 |     })
258 | 
259 |   })
260 | 
261 |   describe('Error Response Validation', () => {
262 |     test('should validate game error responses', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:262:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:261:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
290 |       }
291 |     })
292 |   })
293 | 
294 |   describe('Authentication Requirements', () => {
295 |     test('should validate authentication headers for game endpoints', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:295:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:294:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
316 |       }
317 |     })
318 |   })
319 | 
320 |   describe('Rate Limiting', () => {
321 |     test('should validate rate limiting configuration', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:321:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:320:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
332 |       }
333 |     })
334 |   })
335 | 
336 |   describe('Balance Validation', () => {
337 |     test('should validate balance checks before game play', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:337:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:336:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
349 |       }
350 |     })
351 |   })
352 | 
353 |   describe('Game State Management', () => {
354 |     test('should validate game state transitions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:354:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:353:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
380 |       }
381 |     })
382 |   })
383 | 
384 |   describe('Concurrent Game Handling', () => {
385 |     test('should validate concurrent game restrictions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:385:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:384:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/games.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/auth.test.ts:

# Unhandled error between tests
-------------------------------
19 |   beforeEach(() => {
20 |     app = new Hono()
21 |   })
22 | 
23 |   describe('POST /api/auth/register', () => {
24 |     test('should validate registration request structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:24:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:23:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
140 |       }
141 |     })
142 |   })
143 | 
144 |   describe('POST /api/auth/login', () => {
145 |     test('should validate login request structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:145:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:144:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
189 |       expect(rateLimitConfig.blockDurationMs).toBeGreaterThan(rateLimitConfig.windowMs)
190 |     })
191 |   })
192 | 
193 |   describe('POST /api/auth/logout', () => {
194 |     test('should validate logout request', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:194:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:193:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
214 |       }
215 |     })
216 |   })
217 | 
218 |   describe('POST /api/auth/reset-password', () => {
219 |     test('should validate password reset request', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:219:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:218:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
240 |       }
241 |     })
242 |   })
243 | 
244 |   describe('Authentication Middleware', () => {
245 |     test('should validate JWT token structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:245:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:244:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
300 |       }
301 |     })
302 |   })
303 | 
304 |   describe('Session Management', () => {
305 |     test('should validate session data structure', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:305:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:304:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
338 |       }
339 |     })
340 |   })
341 | 
342 |   describe('Error Handling', () => {
343 |     test('should handle authentication errors properly', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:343:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:342:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
376 |       expect(errorResponse.timestamp).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
377 |     })
378 |   })
379 | 
380 |   describe('Security Measures', () => {
381 |     test('should validate password hashing requirements', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:381:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:380:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/auth.test.ts:16:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/statistics.test.ts:

# Unhandled error between tests
-------------------------------
 5 | 
 6 | import { describe, it, expect } from 'bun:test'
 7 | 
 8 | describe('Statistics API Routes', () => {
 9 |   describe('Route Structure', () => {
10 |     test('should have all required statistics routes defined', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:10:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:9:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
15 |       expect(typeof statisticsRoutes).toBe('object')
16 |     })
17 |   })
18 | 
19 |   describe('Route Dependencies', () => {
20 |     test('should import all required services', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:20:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:19:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
38 |       expect(typeof DatabaseService.getGameHistory).toBe('function')
39 |     })
40 |   })
41 | 
42 |   describe('Validation Schemas', () => {
43 |     test('should validate statistics filters correctly', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:43:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:42:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
56 |       expect(typeof z.object).toBe('function')
57 |     })
58 |   })
59 | 
60 |   describe('Error Handling', () => {
61 |     test('should have proper error handling middleware', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:61:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:60:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
67 |       expect(HTTPException).toBeDefined()
68 |     })
69 |   })
70 | 
71 |   describe('Authentication', () => {
72 |     test('should have authentication middleware', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:72:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:71:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
76 |       expect(typeof authMiddleware).toBe('function')
77 |     })
78 |   })
79 | 
80 |   describe('Statistics Service Integration', () => {
81 |     test('should handle empty statistics correctly', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:81:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:80:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
166 |       expect(typeof habits.totalPlayTime).toBe('number')
167 |     })
168 |   })
169 | 
170 |   describe('Database Service Integration', () => {
171 |     test('should have all required database methods', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:171:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:170:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
185 |       expect(typeof DatabaseService.getGlobalGameStats).toBe('function')
186 |     })
187 |   })
188 | 
189 |   describe('Type Safety', () => {
190 |     test('should have proper TypeScript types', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:190:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:189:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
215 |       expect(GAME_CONFIG.GAME_TYPES).toEqual(['roulette', 'blackjack', 'case_opening'])
216 |     })
217 |   })
218 | 
219 |   describe('API Route Structure', () => {
220 |     test('should export statistics routes properly', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:220:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:219:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
227 |       expect(statisticsModule.statisticsRoutes.constructor.name).toBe('Hono')
228 |     })
229 |   })
230 | 
231 |   describe('Middleware Integration', () => {
232 |     test('should have proper middleware setup', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:232:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:231:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/statistics.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/routes/roulette.test.ts:

# Unhandled error between tests
-------------------------------
117 |     mockCurrencyService.getBalance.mockClear()
118 |     mockCurrencyService.processGameTransaction.mockClear()
119 |   })
120 | 
121 |   describe('GET /roulette', () => {
122 |     test('should return roulette game information', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:122:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:121:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
144 |       })
145 |     })
146 |   })
147 | 
148 |   describe('POST /roulette/bet', () => {
149 |     test('should successfully place a valid roulette bet', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:149:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:148:3)
      at /home/juan/random/appgameproj/packages/backend/src/routes/roulette.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/test-utils/e2e-tests.test.ts:

# Unhandled error between tests
-------------------------------
29 |     // Cleanup
30 |     await mockBrowser.close()
31 |   })
32 | 
33 |   describe('User Registration and Login Flow', () => {
34 |     test('should complete full registration workflow', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:34:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:33:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
119 | 
120 |       // Navigate to roulette
121 |       await mockBrowser.navigate('http://localhost:3000/roulette')
122 |     })
123 | 
124 |     test('should complete full roulette game workflow', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:124:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:108:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
223 |       await submitButton.click()
224 | 
225 |       await mockBrowser.navigate('http://localhost:3000/blackjack')
226 |     })
227 | 
228 |     test('should complete full blackjack game workflow', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:228:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:213:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
324 |       await emailInput.type('test@example.com')
325 |       await passwordInput.type('SecurePass123!')
326 |       await submitButton.click()
327 |     })
328 | 
329 |     test('should view and update user profile', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:329:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:316:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
437 |       await emailInput.type('test@example.com')
438 |       await passwordInput.type('SecurePass123!')
439 |       await submitButton.click()
440 |     })
441 | 
442 |     test('should navigate between all game pages', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:442:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:429:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
500 |       expect(await loginForm.isVisible()).toBe(true)
501 |     })
502 |   })
503 | 
504 |   describe('Error Handling Workflows', () => {
505 |     test('should handle network errors gracefully', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:505:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:504:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/e2e-tests.test.ts:22:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/test-utils/simple-integration.test.tsx:
Performance monitoring service initialized
User experience monitoring initialized

# Unhandled error between tests
-------------------------------
 99 |         </AuthProvider>
100 |       </QueryClientProvider>
101 |     );
102 |   };
103 | 
104 |   test('renders the basic application layout structure', () => {
        ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/simple-integration.test.tsx:104:3)
      at /home/juan/random/appgameproj/packages/frontend/src/test-utils/simple-integration.test.tsx:84:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/test-utils/performance-tests.test.ts:
(pass) Performance Tests for Case Opening Game > Animation Frame Rate Tests > should maintain 60 FPS during carousel animation [600.01ms]
(pass) Performance Tests for Case Opening Game > Animation Frame Rate Tests > should handle animation timing correctly [1.00ms]
(pass) Performance Tests for Case Opening Game > Animation Frame Rate Tests > should handle animation cancellation
(pass) Performance Tests for Case Opening Game > Memory Usage Tests > should not leak memory during carousel generation [1.00ms]
(pass) Performance Tests for Case Opening Game > Memory Usage Tests > should handle large datasets efficiently [1.00ms]
(pass) Performance Tests for Case Opening Game > API Performance Tests > should handle API response times efficiently [20.00ms]
(pass) Performance Tests for Case Opening Game > API Performance Tests > should handle concurrent operations efficiently [19.00ms]
(pass) Performance Tests for Case Opening Game > Animation Performance Tests > should calculate animation positions efficiently [1.00ms]
(pass) Performance Tests for Case Opening Game > Animation Performance Tests > should handle easing calculations efficiently
(pass) Performance Tests for Case Opening Game > Component Rendering Performance > should render components efficiently
(pass) Performance Tests for Case Opening Game > Component Rendering Performance > should handle state updates efficiently [1.00ms]
(pass) Performance Tests for Case Opening Game > Error Handling Performance > should handle errors without performance impact

packages/frontend/src/test-utils/accessibility-tests.test.ts:
(pass) Accessibility Tests for Case Opening Game > Keyboard Navigation Tests > should support Tab navigation between interactive elements
(pass) Accessibility Tests for Case Opening Game > Keyboard Navigation Tests > should handle Enter key activation
(pass) Accessibility Tests for Case Opening Game > Keyboard Navigation Tests > should handle Space key activation
(pass) Accessibility Tests for Case Opening Game > Keyboard Navigation Tests > should handle Escape key for closing modals
(pass) Accessibility Tests for Case Opening Game > Keyboard Navigation Tests > should support arrow key navigation in carousel
(pass) Accessibility Tests for Case Opening Game > Screen Reader Compatibility Tests > should provide proper ARIA labels for interactive elements
(pass) Accessibility Tests for Case Opening Game > Screen Reader Compatibility Tests > should announce state changes to screen readers
(pass) Accessibility Tests for Case Opening Game > Screen Reader Compatibility Tests > should provide descriptive text for images and icons
(pass) Accessibility Tests for Case Opening Game > Screen Reader Compatibility Tests > should handle dynamic content updates
(pass) Accessibility Tests for Case Opening Game > Focus Management Tests > should manage focus properly during case opening
(pass) Accessibility Tests for Case Opening Game > Focus Management Tests > should trap focus in modal dialogs
(pass) Accessibility Tests for Case Opening Game > Focus Management Tests > should restore focus after modal closes
(pass) Accessibility Tests for Case Opening Game > Color and Contrast Tests > should provide sufficient color contrast
(pass) Accessibility Tests for Case Opening Game > Color and Contrast Tests > should not rely solely on color for information
(pass) Accessibility Tests for Case Opening Game > Responsive Design Accessibility > should maintain accessibility on mobile devices
(pass) Accessibility Tests for Case Opening Game > Responsive Design Accessibility > should support touch interactions
(pass) Accessibility Tests for Case Opening Game > Error Handling Accessibility > should announce errors to screen readers
(pass) Accessibility Tests for Case Opening Game > Error Handling Accessibility > should provide error recovery options [1.00ms]

packages/frontend/src/utils/currency.test.ts:

# Unhandled error between tests
-------------------------------
29 |   return /^[a-zA-Z0-9_-]{3,20}$/.test(username)
30 | }
31 | 
32 | describe('Currency Utils', () => {
33 |   describe('formatCurrency', () => {
34 |     test('should format roubles correctly', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:34:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:33:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:32:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
57 |       expect(formatCurrency(0)).toBe('â‚½0')
58 |     })
59 |   })
60 | 
61 |   describe('isValidBetAmount', () => {
62 |     test('should validate positive amounts', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:62:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:61:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:32:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
73 |       expect(isValidBetAmount(Infinity)).toBe(false)
74 |     })
75 |   })
76 | 
77 |   describe('isValidEmail', () => {
78 |     test('should validate correct emails', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:78:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:77:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:32:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
89 |       expect(isValidEmail('')).toBe(false)
90 |     })
91 |   })
92 | 
93 |   describe('isValidUsername', () => {
94 |     test('should validate correct usernames', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:94:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:93:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/currency.test.ts:32:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/game-validator.test.ts:

# Unhandled error between tests
-------------------------------
15 |     validator = new GameValidator()
16 |   })
17 | 
18 |   describe('validateGameResult', () => {
19 |     describe('roulette validation', () => {
20 |       test('should validate correct roulette result', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:20:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:19:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:18:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
80 |         expect(validator.validateGameResult('roulette', invalidResult)).toBe(false)
81 |       })
82 |     })
83 | 
84 |     describe('blackjack validation', () => {
85 |       test('should validate correct blackjack result', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:85:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:84:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:18:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
178 |         expect(validator.validateGameResult('blackjack', incorrectResult)).toBe(false)
179 |       })
180 |     })
181 | 
182 | 
183 |     test('should reject invalid game types', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:183:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:18:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
185 |       expect(validator.validateGameResult('invalid', result)).toBe(false)
186 |     })
187 |   })
188 | 
189 |   describe('validatePayout', () => {
190 |     test('should validate correct roulette payout', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:190:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:189:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
248 |     })
249 | 
250 |   })
251 | 
252 |   describe('validateBetAmount', () => {
253 |     test('should validate correct bet amounts', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:253:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:252:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
264 |       expect(validator.validateBetAmount(0.5, 1000)).toBe(false) // Non-integer
265 |     })
266 |   })
267 | 
268 |   describe('validateGameStateConsistency', () => {
269 |     test('should validate consistent game state', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:269:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:268:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-validator.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/blackjack-game.test.ts:
Storing game with ID: blackjack-1759075304829-test-user-123
Active games after storing: 1
(pass) BlackjackGame > Game Initialization > should create a new blackjack game successfully [2.00ms]
(pass) BlackjackGame > Game Initialization > should reject invalid bet amounts
(pass) BlackjackGame > Game Initialization > should reject bets above maximum
Storing game with ID: blackjack-1759075304831-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304832-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304832-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304833-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304834-test-user-123
Active games after storing: 4
Storing game with ID: blackjack-1759075304836-test-user-123
Active games after storing: 5
(pass) BlackjackGame > Game Initialization > should handle immediate blackjack correctly [7.00ms]
Storing game with ID: blackjack-1759075304838-test-user-123
Active games after storing: 1
(pass) BlackjackGame > Hand Value Calculation > should calculate hand values correctly [1.00ms]
Storing game with ID: blackjack-1759075304839-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304839-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304841-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304842-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304845-test-user-123
Active games after storing: 4
Storing game with ID: blackjack-1759075304846-test-user-123
Active games after storing: 5
Storing game with ID: blackjack-1759075304847-test-user-123
Active games after storing: 6
Storing game with ID: blackjack-1759075304849-test-user-123
Active games after storing: 7
Storing game with ID: blackjack-1759075304850-test-user-123
Active games after storing: 8
Storing game with ID: blackjack-1759075304850-test-user-123
Active games after storing: 8
Storing game with ID: blackjack-1759075304851-test-user-123
Active games after storing: 9
Storing game with ID: blackjack-1759075304852-test-user-123
Active games after storing: 10
Storing game with ID: blackjack-1759075304853-test-user-123
Active games after storing: 11
Storing game with ID: blackjack-1759075304854-test-user-123
Active games after storing: 12
Storing game with ID: blackjack-1759075304855-test-user-123
Active games after storing: 13
Storing game with ID: blackjack-1759075304856-test-user-123
Active games after storing: 14
Storing game with ID: blackjack-1759075304858-test-user-123
Active games after storing: 15
Storing game with ID: blackjack-1759075304859-test-user-123
Active games after storing: 16
Storing game with ID: blackjack-1759075304860-test-user-123
Active games after storing: 17
(pass) BlackjackGame > Hand Value Calculation > should handle aces correctly [23.00ms]
Storing game with ID: blackjack-1759075304861-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304863-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304863-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304864-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304865-test-user-123
Active games after storing: 4
Storing game with ID: blackjack-1759075304866-test-user-123
Active games after storing: 5
Storing game with ID: blackjack-1759075304867-test-user-123
Active games after storing: 6
Storing game with ID: blackjack-1759075304867-test-user-123
Active games after storing: 6
Storing game with ID: blackjack-1759075304868-test-user-123
Active games after storing: 7
Storing game with ID: blackjack-1759075304869-test-user-123
Active games after storing: 8
Storing game with ID: blackjack-1759075304870-test-user-123
Active games after storing: 9
Storing game with ID: blackjack-1759075304871-test-user-123
Active games after storing: 10
Storing game with ID: blackjack-1759075304872-test-user-123
Active games after storing: 11
Storing game with ID: blackjack-1759075304873-test-user-123
Active games after storing: 12
Storing game with ID: blackjack-1759075304874-test-user-123
Active games after storing: 13
Storing game with ID: blackjack-1759075304876-test-user-123
Active games after storing: 14
Storing game with ID: blackjack-1759075304877-test-user-123
Active games after storing: 15
Storing game with ID: blackjack-1759075304878-test-user-123
Active games after storing: 16
Storing game with ID: blackjack-1759075304879-test-user-123
Active games after storing: 17
Storing game with ID: blackjack-1759075304881-test-user-123
Active games after storing: 18
(pass) BlackjackGame > Hand Value Calculation > should handle face cards correctly [21.00ms]
Storing game with ID: blackjack-1759075304882-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304882-test-user-123",
  action: "hit",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304882-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Player Actions > should process hit action correctly
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304884-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304884-test-user-123
156 |         gameId,
157 |         action: 'stand'
158 |       }
159 | 
160 |       const result = await blackjackGame.processAction(action)
161 |       expect(result.success).toBe(true)
                                   ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/blackjack-game.test.ts:161:30)
(fail) BlackjackGame > Player Actions > should process stand action correctly
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304885-test-user-123",
  action: "double",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304885-test-user-123
171 |         gameId,
172 |         action: 'double'
173 |       }
174 | 
175 |       const result = await blackjackGame.processAction(action)
176 |       expect(result.success).toBe(true)
                                   ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/blackjack-game.test.ts:176:30)
(fail) BlackjackGame > Player Actions > should handle double down correctly
Storing game with ID: blackjack-1759075304886-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "non-existent-game",
  action: "hit",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304886-test-user-123" ]
Found game state: false
Game not found for ID: non-existent-game
(pass) BlackjackGame > Player Actions > should reject actions for non-existent games [1.00ms]
Storing game with ID: blackjack-1759075304887-test-user-123
Active games after storing: 1
Processing action: {
  userId: "wrong-user",
  gameId: "blackjack-1759075304887-test-user-123",
  action: "hit",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304887-test-user-123" ]
Found game state: true
User mismatch. Expected: test-user-123 Got: wrong-user
(pass) BlackjackGame > Player Actions > should reject actions from wrong user
Storing game with ID: blackjack-1759075304888-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304888-test-user-123",
  action: "split",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304888-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Split Functionality > should identify splittable hands correctly
Storing game with ID: blackjack-1759075304889-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304889-test-user-123",
  action: "split",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304889-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Split Functionality > should reject split on non-splittable hands
Storing game with ID: blackjack-1759075304890-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304890-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304890-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Dealer Logic > should complete game when player stands [4.00ms]
Storing game with ID: blackjack-1759075304894-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304894-test-user-123",
  action: "hit",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304894-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Dealer Logic > should handle player bust correctly [1.00ms]
Storing game with ID: blackjack-1759075304895-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304895-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304895-test-user-123" ]
Found game state: true
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304896-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304896-test-user-123
Storing game with ID: blackjack-1759075304897-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304897-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304897-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304898-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304898-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304898-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304899-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304899-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304899-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304899-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304899-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304899-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304900-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304900-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304900-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304901-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304901-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304901-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304901-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304901-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304901-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304902-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304902-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304902-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304904-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304904-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304904-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304905-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304905-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304905-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304906-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304906-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304906-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304908-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304908-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304908-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304909-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304909-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304909-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304910-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304910-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304910-test-user-123" ]
Found game state: true
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304911-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304911-test-user-123
Storing game with ID: blackjack-1759075304912-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304912-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304912-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304913-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304913-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304913-test-user-123" ]
Found game state: true
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304914-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304914-test-user-123
Storing game with ID: blackjack-1759075304914-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304914-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304914-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304915-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304915-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304915-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304916-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304916-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304916-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304917-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304917-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304917-test-user-123" ]
Found game state: true
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304918-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304918-test-user-123
Storing game with ID: blackjack-1759075304919-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304919-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304919-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304920-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304920-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304920-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304921-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304921-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304921-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304930-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304930-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304930-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304932-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304932-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304932-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304933-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304933-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304933-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304934-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304934-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304934-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304934-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304934-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304934-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304935-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304935-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304935-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304936-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304936-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304936-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304936-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304936-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304936-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304937-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304937-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304937-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304939-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304939-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304939-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304940-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304940-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304940-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304941-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304941-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304941-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304942-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304942-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304942-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304942-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304942-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304942-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304943-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304943-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304943-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304944-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304944-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304944-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304945-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304945-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304945-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304946-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304946-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304946-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304947-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304947-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304947-test-user-123" ]
Found game state: true
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304948-test-user-123",
  action: "stand",
}
Active games count: 0
Active game IDs: []
Found game state: false
Game not found for ID: blackjack-1759075304948-test-user-123
Storing game with ID: blackjack-1759075304948-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304948-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304948-test-user-123" ]
Found game state: true
Storing game with ID: blackjack-1759075304949-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304949-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304949-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Payout Calculations > should calculate correct payouts for different outcomes [56.00ms]
Storing game with ID: blackjack-1759075304950-test-user-123
Active games after storing: 1
(pass) BlackjackGame > Game State Management > should maintain game state correctly [1.00ms]
Storing game with ID: blackjack-1759075304951-test-user-123
Active games after storing: 1
Processing action: {
  userId: "test-user-123",
  gameId: "blackjack-1759075304951-test-user-123",
  action: "stand",
}
Active games count: 1
Active game IDs: [ "blackjack-1759075304951-test-user-123" ]
Found game state: true
(pass) BlackjackGame > Game State Management > should clean up completed games [1.00ms]
Storing game with ID: blackjack-1759075304953-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304953-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304955-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304956-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304956-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304960-test-user-123
Active games after storing: 4
Storing game with ID: blackjack-1759075304961-test-user-123
Active games after storing: 5
Storing game with ID: blackjack-1759075304962-test-user-123
Active games after storing: 6
Storing game with ID: blackjack-1759075304962-test-user-123
Active games after storing: 6
Storing game with ID: blackjack-1759075304963-test-user-123
Active games after storing: 7
Storing game with ID: blackjack-1759075304964-test-user-123
Active games after storing: 8
Storing game with ID: blackjack-1759075304965-test-user-123
Active games after storing: 9
Storing game with ID: blackjack-1759075304966-test-user-123
Active games after storing: 10
Storing game with ID: blackjack-1759075304967-test-user-123
Active games after storing: 11
Storing game with ID: blackjack-1759075304968-test-user-123
Active games after storing: 12
Storing game with ID: blackjack-1759075304970-test-user-123
Active games after storing: 13
Storing game with ID: blackjack-1759075304972-test-user-123
Active games after storing: 14
Storing game with ID: blackjack-1759075304973-test-user-123
Active games after storing: 15
Storing game with ID: blackjack-1759075304974-test-user-123
Active games after storing: 16
Storing game with ID: blackjack-1759075304976-test-user-123
Active games after storing: 17
93 |       // Wait for frames to complete
94 |       setTimeout(() => {
95 |         // Check that frames are spaced approximately 16ms apart (60 FPS)
96 |         for (let i = 1; i < frameTimes.length; i++) {
97 |           const frameDelta = frameTimes[i] - frameTimes[i - 1]
98 |           expect(frameDelta).toBeGreaterThan(10) // At least 10ms between frames
                                  ^
error: expect(received).toBeGreaterThan(expected)

Expected: > 10
Received: NaN

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/test-utils/performance-tests.test.ts:98:30)
(fail) BlackjackGame > Edge Cases > should handle multiple aces correctly [25.00ms]
Storing game with ID: blackjack-1759075304977-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304977-test-user-123
Active games after storing: 1
(pass) BlackjackGame > Edge Cases > should handle empty deck gracefully [1.00ms]
(pass) BlackjackGame > Game Information > should provide correct game information
Storing game with ID: blackjack-1759075304978-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304978-test-user-123
Active games after storing: 1
Storing game with ID: blackjack-1759075304979-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304979-test-user-123
Active games after storing: 2
Storing game with ID: blackjack-1759075304980-test-user-123
Active games after storing: 3
Storing game with ID: blackjack-1759075304980-test-user-123
Active games after storing: 3

packages/backend/src/services/game-engine/game-state-manager.test.ts:

# Unhandled error between tests
-------------------------------
13 |   beforeEach(() => {
14 |     manager = new GameStateManager()
15 |   })
16 | 
17 |   describe('createGameState', () => {
18 |     test('should create a new game state', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:18:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
46 |       expect(state1.gameId).not.toBe(state2.gameId)
47 |     })
48 |   })
49 | 
50 |   describe('updateGameState', () => {
51 |     test('should update existing game state', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:51:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:50:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
89 |       expect(updatedState.createdAt).toEqual(gameState.createdAt)
90 |     })
91 |   })
92 | 
93 |   describe('getGameState', () => {
94 |     test('should retrieve existing game state', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:94:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:93:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
109 |       expect(retrieved).toBeNull()
110 |     })
111 |   })
112 | 
113 |   describe('completeGame', () => {
114 |     test('should complete a game successfully', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:114:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:113:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
164 |       ).rejects.toThrow('Game state not found: non-existent')
165 |     })
166 |   })
167 | 
168 |   describe('getActiveGamesForUser', () => {
169 |     test('should return active games for user', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:169:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:168:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
189 |       expect(activeGames).toHaveLength(0)
190 |     })
191 |   })
192 | 
193 |   describe('getGameHistoryForUser', () => {
194 |     test('should return completed games for user', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:194:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:193:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
248 |       expect(history[1].gameId).toBe(state1.gameId)
249 |     })
250 |   })
251 | 
252 |   describe('cleanupOldStates', () => {
253 |     test('should clean up old completed games', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:253:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:252:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
302 |       expect(retrieved).not.toBeNull()
303 |     })
304 |   })
305 | 
306 |   describe('getGameStatistics', () => {
307 |     test('should return correct statistics', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:307:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:306:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
325 |       expect(stats.gamesByType.blackjack).toBe(1)
326 |     })
327 |   })
328 | 
329 |   describe('hasPendingGames', () => {
330 |     test('should detect pending games', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:330:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:329:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
353 |       expect(hasPending).toBe(false)
354 |     })
355 |   })
356 | 
357 |   describe('cancelPendingGames', () => {
358 |     test('should cancel pending and active games', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:358:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:357:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/game-state-manager.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/random-generator.test.ts:

# Unhandled error between tests
-------------------------------
13 |   beforeEach(() => {
14 |     generator = new SecureRandomGenerator()
15 |   })
16 | 
17 |   describe('generateSecureRandom', () => {
18 |     test('should generate random numbers between 0 and 1', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:18:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
35 |       expect(value1).not.toBe(value2)
36 |     })
37 |   })
38 | 
39 |   describe('generateSecureRandomInt', () => {
40 |     test('should generate integers within specified range', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:40:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:39:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
68 |       expect(Array.from(unique).sort()).toEqual([1, 2, 3, 4, 5, 6])
69 |     })
70 |   })
71 | 
72 |   describe('generateSecureBytes', () => {
73 |     test('should generate buffer of correct length', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:73:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:72:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
82 |       expect(bytes1.equals(bytes2)).toBe(false)
83 |     })
84 |   })
85 | 
86 |   describe('generateSeed', () => {
87 |     test('should generate hex string of correct length', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:87:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:86:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
102 |       expect(unique.size).toBe(10)
103 |     })
104 |   })
105 | 
106 |   describe('generateProvablyFairResult', () => {
107 |     test('should generate consistent results for same seed', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:107:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:106:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
169 |       }
170 |     })
171 |   })
172 | 
173 |   describe('verifyProvablyFairResult', () => {
174 |     test('should verify valid results', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:174:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:173:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
198 |       expect(isValid).toBe(false)
199 |     })
200 |   })
201 | 
202 |   describe('generateMultipleFromSeed', () => {
203 |     test('should generate multiple consistent random values', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:203:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:202:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
234 |       expect(unique.size).toBeGreaterThan(5)
235 |     })
236 |   })
237 | 
238 |   describe('hashServerSeed', () => {
239 |     test('should generate consistent hash for same seed', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:239:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:238:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/random-generator.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/roulette-game.test.ts:

# Unhandled error between tests
-------------------------------
13 |   beforeEach(() => {
14 |     rouletteGame = new RouletteGame()
15 |   })
16 | 
17 |   describe('Bet Validation', () => {
18 |     test('should validate basic bet parameters', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:18:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
135 |       }
136 |     })
137 |   })
138 | 
139 |   describe('Game Play', () => {
140 |     test('should successfully play a valid roulette game', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:140:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:139:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
191 |       }
192 |     })
193 |   })
194 | 
195 |   describe('Payout Calculations', () => {
196 |     test('should calculate correct payouts for number bets', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:196:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:195:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
256 |       expect(payout).toBe(0)
257 |     })
258 |   })
259 | 
260 |   describe('Static Methods', () => {
261 |     test('should return valid bet types information', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:261:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:260:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
309 |       }
310 |     })
311 |   })
312 | 
313 |   describe('Edge Cases', () => {
314 |     test('should handle zero winning number correctly for outside bets', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:314:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:313:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
403 |       expect(result.success).toBe(true)
404 |     })
405 |   })
406 | 
407 |   describe('Randomness and Fairness', () => {
408 |     test('should produce different results across multiple games', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:408:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:407:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-game.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/roulette-final.test.ts:

# Unhandled error between tests
-------------------------------
 8 | import { PayoutCalculator } from './payout-calculator'
 9 | import { GameValidator } from './game-validator'
10 | import { RouletteResult } from '../../types/database'
11 | 
12 | describe('Roulette Final Implementation Test', () => {
13 |   test('should complete a full roulette game workflow', async () => {
       ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-final.test.ts:13:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-final.test.ts:12:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/core-engine.test.ts:

# Unhandled error between tests
-------------------------------
13 |   beforeEach(() => {
14 |     engine = new CoreGameEngine()
15 |   })
16 | 
17 |   describe('validateBet', () => {
18 |     test('should validate correct bets', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:18:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:17:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
81 |       expect(isValid2).toBe(true)
82 |     })
83 |   })
84 | 
85 |   describe('generateProvablyFairResult', () => {
86 |     test('should generate consistent results for same seed', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:86:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:85:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
118 |       expect(result1.randomValue).not.toBe(result2.randomValue)
119 |     })
120 |   })
121 | 
122 |   describe('processGame', () => {
123 |     test('should process a valid roulette game', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:123:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:122:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
216 |       }
217 |     })
218 |   })
219 | 
220 |   describe('calculatePayout', () => {
221 |     test('should calculate correct roulette payouts', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:221:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:220:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
293 |       expect(payout).toBe(0)
294 |     })
295 |   })
296 | 
297 |   describe('getEngineStatistics', () => {
298 |     test('should return engine statistics', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:298:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:297:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
323 |       expect(updatedStats.totalGames).toBe(initialStats.totalGames + 1)
324 |     })
325 |   })
326 | 
327 |   describe('cleanup', () => {
328 |     test('should clean up old game states', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:328:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:327:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
340 |       expect(cleanedCount).toBeGreaterThanOrEqual(0)
341 |     })
342 |   })
343 | 
344 |   describe('edge cases and error handling', () => {
345 |     test('should handle multiple concurrent games from different users', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:345:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:344:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/core-engine.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/roulette-integration.test.ts:

# Unhandled error between tests
-------------------------------
 5 | 
 6 | import { describe, it, expect } from 'bun:test'
 7 | import { RouletteGame } from './roulette-game'
 8 | 
 9 | describe('Roulette Integration', () => {
10 |   test('should create a roulette game and play successfully', async () => {
       ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-integration.test.ts:10:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/roulette-integration.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/backend/src/services/game-engine/payout-calculator.test.ts:

# Unhandled error between tests
-------------------------------
13 |     calculator = new PayoutCalculator()
14 |   })
15 | 
16 |   describe('calculateRoulettePayout', () => {
17 |     describe('number bets', () => {
18 |       test('should calculate correct payout for winning number bet', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:18:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:17:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
30 |         expect(payout).toBe(1750) // 35:1 payout
31 |       })
32 |     })
33 | 
34 |     describe('color bets', () => {
35 |       test('should calculate correct payout for winning red bet', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:35:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:34:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
54 |         expect(blackPayout).toBe(0)
55 |       })
56 |     })
57 | 
58 |     describe('odd/even bets', () => {
59 |       test('should calculate correct payout for winning odd bet', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:59:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:58:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
78 |         expect(evenPayout).toBe(0)
79 |       })
80 |     })
81 | 
82 |     describe('high/low bets', () => {
83 |       test('should calculate correct payout for winning low bet', () => {
           ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:83:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:82:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
102 |         expect(highPayout).toBe(0)
103 |       })
104 |     })
105 | 
106 |     describe('dozen bets', () => {
107 |       test('should calculate correct payout for winning first dozen', () => {
            ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:107:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:106:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
124 |         expect(payout).toBe(0)
125 |       })
126 |     })
127 | 
128 |     describe('column bets', () => {
129 |       test('should calculate correct payout for winning column bets', () => {
            ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:129:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:128:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
141 |         expect(payout).toBe(0)
142 |       })
143 |     })
144 | 
145 |     describe('invalid bets', () => {
146 |       test('should return 0 for invalid bet types', () => {
            ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:146:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:145:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
156 |       })
157 |     })
158 |   })
159 | 
160 |   describe('calculateBlackjackPayout', () => {
161 |     test('should calculate correct payout for blackjack', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:161:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:160:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
195 |   })
196 | 
197 | 
198 | 
199 |   describe('getHouseEdge', () => {
200 |     test('should return correct house edges for different games', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:200:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:199:3)
      at /home/juan/random/appgameproj/packages/backend/src/services/game-engine/payout-calculator.test.ts:9:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/connection-manager.test.ts:

# Unhandled error between tests
-------------------------------
 8 | import { ChatService } from '../chat-service';
 9 | import { PresenceService } from '../presence-service';
10 | import type { ConnectionStatus } from '../../types/chat';
11 | 
12 | // Mock the service classes
13 | jest.mock('../chat-service');
     ^
ReferenceError: jest is not defined
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.test.ts:13:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:

# Unhandled error between tests
-------------------------------
82 |     // Reset navigator.onLine
83 |     Object.defineProperty(navigator, 'onLine', { value: true });
84 |   });
85 | 
86 |   describe('connection health monitoring', () => {
87 |     test('should provide connection health information', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:87:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:86:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
143 |       });
144 |     });
145 |   });
146 | 
147 |   describe('network status monitoring', () => {
148 |     test('should track network status', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:148:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:147:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
200 |         username: 'testuser',
201 |         accessToken: 'token',
202 |       });
203 |     });
204 | 
205 |     test('should queue messages when offline', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:205:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:196:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
310 |       expect(mockChatService.sendMessage).toHaveBeenCalledWith('Retry message');
311 |     });
312 |   });
313 | 
314 |   describe('exponential backoff reconnection', () => {
315 |     test('should implement exponential backoff for reconnection delays', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:315:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:314:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
392 |       expect(mockChatService.initialize).toHaveBeenCalledTimes(1);
393 |     });
394 |   });
395 | 
396 |   describe('error handling and recovery', () => {
397 |     test('should handle service errors gracefully', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:397:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:396:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
482 |         username: 'testuser',
483 |         accessToken: 'initial-token',
484 |       });
485 |     });
486 | 
487 |     test('should update tokens in services when token is refreshed', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:487:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:475:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
498 |       expect(connectionManager.getCurrentToken()).toBe('updated-token');
499 |     });
500 |   });
501 | 
502 |   describe('cleanup and resource management', () => {
503 |     test('should cleanup network listeners on disconnect', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:503:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:502:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager-enhanced.test.ts:38:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/error-handling-basic.test.ts:

# Unhandled error between tests
-------------------------------
 8 | import { ChatErrorType, MessageStatus } from '../../types/chat';
 9 | import type { ConnectionHealth, NetworkStatus, QueuedMessage } from '../../types/chat';
10 | 
11 | describe('Error Handling Types and Constants', () => {
12 |   describe('ChatErrorType', () => {
13 |     test('should have all required error types', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:13:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:12:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
22 |       expect(ChatErrorType.UNKNOWN_ERROR).toBe('unknown_error');
23 |     });
24 |   });
25 | 
26 |   describe('MessageStatus', () => {
27 |     test('should have all required message statuses', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:27:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:26:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
30 |       expect(MessageStatus.FAILED).toBe('failed');
31 |     });
32 |   });
33 | 
34 |   describe('ConnectionHealth interface', () => {
35 |     test('should create valid connection health object', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:35:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:34:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
68 |       expect(health.queuedMessageCount).toBe(2);
69 |     });
70 |   });
71 | 
72 |   describe('NetworkStatus interface', () => {
73 |     test('should create valid network status object', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:73:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:72:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
91 |       expect(networkStatus.connectionType).toBeUndefined();
92 |     });
93 |   });
94 | 
95 |   describe('QueuedMessage interface', () => {
96 |     test('should create valid queued message object', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:96:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:95:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:11:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
126 |   });
127 | });
128 | 
129 | describe('Error Handling Utility Functions', () => {
130 |   describe('exponential backoff calculation', () => {
131 |     test('should calculate exponential backoff delays', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:131:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:130:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:129:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
149 |       expect(delay10).toBe(maxDelay);
150 |     });
151 |   });
152 | 
153 |   describe('message queue management', () => {
154 |     test('should serialize and deserialize queued messages', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:154:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:153:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:129:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
190 |       expect(Array.isArray(deserialized)).toBe(true);
191 |     });
192 |   });
193 | 
194 |   describe('connection status transitions', () => {
195 |     test('should validate connection status transitions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:195:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:194:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:129:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
221 |       expect(getOverallStatus('disconnected', 'disconnected')).toBe('disconnected');
222 |     });
223 |   });
224 | 
225 |   describe('error message formatting', () => {
226 |     test('should format user-friendly error messages', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:226:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:225:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:129:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
247 |         .toBe('Unknown error');
248 |     });
249 |   });
250 | 
251 |   describe('network status detection', () => {
252 |     test('should detect online/offline status', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:252:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:251:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-basic.test.ts:129:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/error-handling-integration.test.ts:

# Unhandled error between tests
-------------------------------
23 |   getItem: mock(),
24 |   setItem: mock(),
25 |   removeItem: mock(),
26 |   clear: mock(),
27 | };
28 | Object.defineProperty(window, 'localStorage', {
            ^
TypeError: Attempting to change value of a readonly property.
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/error-handling-integration.test.ts:28:8
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:

# Unhandled error between tests
-------------------------------
56 | 
57 |     connectionManager = new ConnectionManager({ debug: false });
58 |   });
59 | 
60 |   describe('Authentication context handling', () => {
61 |     test('requires authentication context for initialization', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:61:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:60:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
115 |       expect(currentUser).toBeNull();
116 |     });
117 |   });
118 | 
119 |   describe('Token management', () => {
120 |     test('returns current token', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:120:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:119:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
158 |       expect(mockPresenceService.updateToken).not.toHaveBeenCalled();
159 |     });
160 |   });
161 | 
162 |   describe('Connection statistics with authentication', () => {
163 |     test('includes authentication status in stats', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:163:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:162:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
176 |       expect(authenticatedStats.isAuthenticated).toBe(true);
177 |     });
178 |   });
179 | 
180 |   describe('Disconnect and cleanup', () => {
181 |     test('clears authentication context on disconnect', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:181:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:180:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
194 |       expect(connectionManager.getCurrentToken()).toBeNull();
195 |     });
196 |   });
197 | 
198 |   describe('Error handling with authentication', () => {
199 |     test('handles authentication errors during initialization', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:199:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:198:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
227 |       });
228 |     });
229 |   });
230 | 
231 |   describe('Service integration with authentication', () => {
232 |     test('passes authentication context to both services', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:232:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:231:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/connection-manager.auth.test.ts:20:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/presence-service.test.ts:

# Unhandled error between tests
-------------------------------
55 |   afterEach(() => {
56 |     presenceService.disconnect();
57 |   });
58 | 
59 |   describe('initialization', () => {
60 |     test('should initialize successfully with authenticated user', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:60:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:59:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
128 |       });
129 | 
130 |       await presenceService.initialize();
131 |     });
132 | 
133 |     test('should handle presence sync events', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:133:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:118:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
230 |       });
231 | 
232 |       await presenceService.initialize();
233 |     });
234 | 
235 |     test('should return empty list initially', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:235:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:220:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
277 |       });
278 | 
279 |       await presenceService.initialize();
280 |     });
281 | 
282 |     test('should handle users change subscriptions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:282:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:267:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
345 |         callback('SUBSCRIBED');
346 |         return Promise.resolve();
347 |       });
348 |     });
349 | 
350 |     test('should start heartbeat after successful connection', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:350:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:337:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
384 |       expect(mockChannel.track).not.toHaveBeenCalled();
385 |     });
386 |   });
387 | 
388 |   describe('connection management', () => {
389 |     test('should allow manual reconnection', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:389:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:388:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
430 |       );
431 |     });
432 |   });
433 | 
434 |   describe('cleanup', () => {
435 |     test('should cleanup resources on disconnect', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:435:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:434:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/presence-service.test.ts:31:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/services/__tests__/service-integration.test.ts:

# Unhandled error between tests
-------------------------------
 7 | import { ChatService, PresenceService, ConnectionManager } from '../index';
 8 | import type { ChatServiceConfig } from '../../types/chat';
 9 | 
10 | describe('Service Integration', () => {
11 |   describe('ChatService', () => {
12 |     test('should create instance with default config', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:12:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:11:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
61 |       expect(() => unsubError()).not.toThrow();
62 |     });
63 |   });
64 | 
65 |   describe('PresenceService', () => {
66 |     test('should create instance with default config', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:66:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:65:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
 99 |       expect(() => unsubError()).not.toThrow();
100 |     });
101 |   });
102 | 
103 |   describe('ConnectionManager', () => {
104 |     test('should create instance and provide service access', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:104:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:103:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
153 |       expect(() => connectionManager.disconnect()).not.toThrow();
154 |     });
155 |   });
156 | 
157 |   describe('Service Exports', () => {
158 |     test('should export all required services and utilities', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:158:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:157:3)
      at /home/juan/random/appgameproj/packages/frontend/src/services/__tests__/service-integration.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/errorHandling.test.ts:
(pass) Error Handling Utilities > should identify network errors correctly [1.00ms]
(pass) Error Handling Utilities > should identify authentication errors correctly
(pass) Error Handling Utilities > should identify animation errors correctly
(pass) Error Handling Utilities > should identify validation errors correctly
(pass) Error Handling Utilities > should identify API errors correctly
(pass) Error Handling Utilities > should handle unknown errors
(pass) Error Handling Utilities > should get user-friendly error messages
(pass) Error Handling Utilities > should get technical error messages
(pass) Error Handling Utilities > should identify recoverable errors
(pass) Error Handling Utilities > should identify non-recoverable errors
(pass) Error Handling Utilities > should calculate retry delay with exponential backoff
(pass) Error Handling Utilities > should create error context
Executing reveal fallback for: animation
(pass) Error Handling Utilities > should execute reveal fallback
Executing simple fallback for: network
(pass) Error Handling Utilities > should execute simple fallback
Executing refresh fallback for: auth
(pass) Error Handling Utilities > should execute refresh fallback
No fallback available for: validation
(pass) Error Handling Utilities > should handle no fallback
[NETWORK] Network request failed - possible connectivity issue {
  message: "Network request failed",
  stack: "Error: Network request failed\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:159:23)\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:158:64)",
  strategy: "network",
  operation: "test operation",
  component: "TestComponent",
  attemptCount: 1,
  userId: undefined,
  timestamp: 1759075305056,
}
Retrying test operation in 1072.400563837689ms (attempt 1/3)
Retry 1 failed for test operation: warn: Still failing
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:166:15)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:163:23)
      at handleErrorWithRecovery (/home/juan/random/appgameproj/packages/frontend/src/utils/errorHandling.ts:390:13)

[NETWORK] Network request failed - possible connectivity issue {
  message: "Network request failed",
  stack: "Error: Network request failed\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:159:23)\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:158:64)",
  strategy: "network",
  operation: "test operation",
  component: "TestComponent",
  attemptCount: 2,
  userId: undefined,
  timestamp: 1759075305056,
}
Retrying test operation in 2130.9511512607196ms (attempt 2/3)
(pass) Error Handling Utilities > should handle error with recovery - successful retry [3205.08ms]
[ANIMATION] Animation system error - falling back to reveal mode {
  message: "Animation failed",
  stack: "Error: Animation failed\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:180:23)\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:179:64)",
  strategy: "animation",
  operation: "animation",
  component: "TestComponent",
  attemptCount: 1,
  userId: undefined,
  timestamp: 1759075308260,
}
(pass) Error Handling Utilities > should handle error with recovery - fallback success
[VALIDATION] Input validation failed - malformed request data {
  message: "Invalid input",
  stack: "Error: Invalid input\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:196:23)\n    at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/errorHandling.test.ts:195:68)",
  strategy: "validation",
  operation: "validation",
  component: "TestComponent",
  attemptCount: 1,
  userId: undefined,
  timestamp: 1759075308260,
}
(pass) Error Handling Utilities > should handle error with recovery - no recovery possible
(pass) Error Handling Utilities > should handle context-based error detection
(pass) Error Handling Utilities > should handle error message variations
(pass) Error Handling Utilities > should handle authentication message variations

packages/frontend/src/utils/__tests__/carousel-integration.test.ts:

# Unhandled error between tests
-------------------------------
27 |   createMockItem('5', 'Salewa', 'uncommon', 300)
28 | ]
29 | 
30 | describe('Carousel Integration Tests', () => {
31 |   describe('End-to-End Carousel Generation', () => {
32 |     test('should generate a complete, valid carousel sequence', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:32:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:31:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:30:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
90 |       })
91 |     })
92 |   })
93 | 
94 |   describe('Carousel Accuracy Validation', () => {
95 |     test('should ensure winning item lands precisely in center', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:95:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:94:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:30:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
145 |       expect(Object.keys(itemCounts).length).toBeGreaterThanOrEqual(3) // At least 3 different items
146 |     })
147 |   })
148 | 
149 |   describe('Performance and Reliability', () => {
150 |     test('should handle edge cases without errors', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:150:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:149:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:30:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
203 |       expect(CAROUSEL_TIMING.VISIBLE_ITEMS).toBeLessThan(10) // Not too cluttered
204 |     })
205 |   })
206 | 
207 |   describe('Real-world Scenario Testing', () => {
208 |     test('should simulate a complete case opening flow', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:208:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:207:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-integration.test.ts:30:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/carousel.test.ts:

# Unhandled error between tests
-------------------------------
52 |   }
53 | ]
54 | 
55 | describe('Carousel Utilities', () => {
56 |   describe('generateCarouselSequence', () => {
57 |     test('should generate a sequence with the correct length', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:57:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:56:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
93 |       }).toThrow('Winning position must be less than sequence length')
94 |     })
95 |   })
96 | 
97 |   describe('calculateWinningPosition', () => {
98 |     test('should return a position within the specified range', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:98:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:97:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
113 |       expect(position).toBeLessThanOrEqual(8)
114 |     })
115 |   })
116 | 
117 |   describe('validateCarouselSequence', () => {
118 |     test('should validate a correct sequence', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:118:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:117:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
145 |       expect(validateCarouselSequence(sequence)).toBe(false)
146 |     })
147 |   })
148 | 
149 |   describe('getWeightedRandomItem', () => {
150 |     test('should return an item from the provided array', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:150:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:149:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
193 |       expect(item).toBe(mockItems[0])
194 |     })
195 |   })
196 | 
197 |   describe('CAROUSEL_TIMING constants', () => {
198 |     test('should have reasonable timing values', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:198:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:197:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
212 |       expect(CAROUSEL_TIMING.WINNING_POSITION_MAX).toBeLessThan(CAROUSEL_TIMING.SEQUENCE_LENGTH)
213 |     })
214 |   })
215 | 
216 |   describe('Mathematical accuracy tests', () => {
217 |     test('should calculate precise final positions', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:217:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:216:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
236 |       expect(sequence2[9].isWinning).toBe(true)
237 |     })
238 |   })
239 | 
240 |   describe('Performance tests', () => {
241 |     test('should generate large sequences efficiently', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:241:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:240:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel.test.ts:55:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/performance-optimization.test.ts:

# Unhandled error between tests
-------------------------------
1 | import { describe, it, expect, beforeEach, afterEach, vi } from 'bun:test';
2 | 
3 | // Mock browser APIs before importing modules
4 | const localStorageMock = {
5 |   getItem: jest.fn(() => null),
               ^
ReferenceError: jest is not defined
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/performance-optimization.test.ts:5:12
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/cache.test.ts:

# Unhandled error between tests
-------------------------------
1 | import { describe, it, expect, beforeEach, vi } from 'bun:test';
2 | 
3 | // Mock localStorage
4 | const localStorageMock = {
5 |   getItem: jest.fn(),
               ^
ReferenceError: jest is not defined
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/cache.test.ts:5:12
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:

# Unhandled error between tests
-------------------------------
12 |     { id: '4', name: 'Vodka', rarity: 'rare', base_value: 500, category: 'consumables', is_active: true, created_at: '2024-01-01', updated_at: '2024-01-01' },
13 |     { id: '5', name: 'Salewa', rarity: 'uncommon', base_value: 300, category: 'medical', is_active: true, created_at: '2024-01-01', updated_at: '2024-01-01' }
14 |   ] as any[]
15 | 
16 |   describe('Consistent Item Population', () => {
17 |     test('should populate carousel entirely with real items from case pool', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:17:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:16:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:7:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
55 |       })
56 |     })
57 |   })
58 | 
59 |   describe('Weighted Random Selection', () => {
60 |     test('should respect rarity weights', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:60:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:59:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:7:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
87 |       }).not.toThrow()
88 |     })
89 |   })
90 | 
91 |   describe('Animation Direction Consistency', () => {
92 |     test('should calculate consistent left-to-right movement', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:92:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:91:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:7:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
261 |       })
262 |     })
263 |   })
264 | 
265 |   describe('Real Item Validation', () => {
266 |     test('should only use items with valid properties', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:266:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:265:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/carousel-fixes.test.ts:7:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:

# Unhandled error between tests
-------------------------------
1 | import { describe, it, expect, vi } from 'bun:test';
2 | 
3 | describe('Lazy Loading Utilities', () => {
4 |   describe('withLazyLoading', () => {
5 |     test('should create a lazy wrapper component', async () => {
        ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:5:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:4:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:3:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
14 |       expect(typeof LazyWrapper).toBe('function');
15 |     });
16 |   });
17 | 
18 |   describe('Preloading Functions', () => {
19 |     test('should support preloading critical components', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:19:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:18:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:3:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
38 |       expect(typeof handlers.onFocus).toBe('function');
39 |     });
40 |   });
41 | 
42 |   describe('Progressive Loading Hook', () => {
43 |     test('should provide preload functions', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:43:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:42:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:3:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
46 |       expect(typeof useProgressiveLoading).toBe('function');
47 |     });
48 |   });
49 | 
50 |   describe('Lazy Component Exports', () => {
51 |     test('should export lazy game components', async () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:51:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:50:3)
      at /home/juan/random/appgameproj/packages/frontend/src/utils/__tests__/lazy-loading.test.tsx:3:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useCaseData.test.ts:

# Unhandled error between tests
-------------------------------
37 |     }))
38 |     mockSupabase.auth.getSession.mockClear()
39 |     mockToast.error.mockClear()
40 |   })
41 | 
42 |   test('should initialize with loading state', () => {
       ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseData.test.ts:42:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseData.test.ts:26:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useChat.test.ts:

# Unhandled error between tests
-------------------------------
 7 | import type { ChatMessage, OnlineUser, ConnectionStatus, ChatError } from '../../types/chat';
 8 | import { MessageStatus } from '../../types/chat';
 9 | 
10 | describe('useChat Hook', () => {
11 |   describe('ChatMessage interface', () => {
12 |     test('should have correct message structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:12:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:11:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
25 |       expect(message.username).toBe('testuser');
26 |     });
27 |   });
28 | 
29 |   describe('OnlineUser interface', () => {
30 |     test('should have correct user structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:30:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:29:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
40 |       expect(user.is_online).toBe(true);
41 |     });
42 |   });
43 | 
44 |   describe('MessageStatus enum', () => {
45 |     test('should have correct status values', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:45:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:44:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
48 |       expect(MessageStatus.FAILED).toBe('failed');
49 |     });
50 |   });
51 | 
52 |   describe('ConnectionStatus type', () => {
53 |     test('should accept valid connection statuses', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:53:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:52:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
63 |       });
64 |     });
65 |   });
66 | 
67 |   describe('ChatError interface', () => {
68 |     test('should have correct error structure', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:68:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:67:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.test.ts:10:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useCaseOpeningGame.test.ts:

# Unhandled error between tests
-------------------------------
84 |     success: mock(),
85 |     error: mock()
86 |   })
87 | }))
88 | 
89 | describe('useCaseOpeningGame', () => {
     ^
ReferenceError: describe is not defined
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseOpeningGame.test.ts:89:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useChat.auth.test.ts:

# Unhandled error between tests
-------------------------------
 9 | import { useChat, useChatState } from '../useChat';
10 | import { useAuth } from '../useAuth';
11 | import { connectionManager } from '../../services/connection-manager';
12 | 
13 | // Mock the auth hook
14 | jest.mock('../useAuth');
          ^
TypeError: jest.mock is not a function. (In 'jest.mock("../useAuth")', 'jest.mock' is undefined)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useChat.auth.test.ts:14:6
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:
66 | 
67 |   test('should initialize with no error', () => {
68 |     // Simple test without React testing library
69 |     const hook = useErrorHandling()
70 | 
71 |     expect(hook.error).toBeNull()
                            ^
error: expect(received).toBeNull()

Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:71:24)
(fail) useErrorHandling > should initialize with no error [1.00ms]
77 |     const hook = useErrorHandling()
78 |     const networkError = new Error('Network request failed')
79 | 
80 |     const recovered = await hook.handleError(networkError, 'case opening')
81 | 
82 |     expect(recovered).toBe(true) // Recovered via retry
                           ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:82:23)
(fail) useErrorHandling > should handle network errors with retry
88 |     const authError = new Error('Authentication failed')
89 | 
90 |     const recovered = await hook.handleError(authError, 'case opening')
91 | 
92 |     expect(recovered).toBe(false)
93 |     expect(hook.error).toBe('Please log in to continue')
                            ^
error: expect(received).toBe(expected)

Expected: "Please log in to continue"
Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:93:24)
(fail) useErrorHandling > should handle authentication errors without retry
 98 |     const hook = useErrorHandling()
 99 |     const animationError = new Error('Animation failed')
100 | 
101 |     const recovered = await hook.handleError(animationError, 'carousel animation')
102 | 
103 |     expect(recovered).toBe(true) // Recovered via fallback
                            ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:103:23)
(fail) useErrorHandling > should handle animation errors with fallback
109 |     const validationError = new Error('Insufficient balance')
110 | 
111 |     const recovered = await hook.handleError(validationError, 'case opening')
112 | 
113 |     expect(recovered).toBe(false)
114 |     expect(hook.error).toBe('Insufficient balance')
                             ^
error: expect(received).toBe(expected)

Expected: "Insufficient balance"
Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:114:24)
(fail) useErrorHandling > should handle validation errors
127 |       return 'success'
128 |     })
129 | 
130 |     const finalResult = await hook.retryOperation(mockOperation, 'test retry')
131 | 
132 |     expect(callCount).toBe(2)
                            ^
error: expect(received).toBe(expected)

Expected: 2
Received: 0

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:132:23)
(fail) useErrorHandling > should retry operations successfully
141 |       throw new Error('Persistent network error')
142 |     })
143 | 
144 |     const finalResult = await hook.retryOperation(mockOperation, 'test retry')
145 | 
146 |     expect(finalResult).toBeNull()
                              ^
error: expect(received).toBeNull()

Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:146:25)
(fail) useErrorHandling > should stop retrying after max attempts
151 |   test('should clear error', () => {
152 |     const hook = useErrorHandling()
153 | 
154 |     hook.clearError()
155 | 
156 |     expect(hook.error).toBeNull()
                             ^
error: expect(received).toBeNull()

Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:156:24)
(fail) useErrorHandling > should clear error
159 |   })
160 | 
161 |   test('should get user-friendly error messages', () => {
162 |     const hook = useErrorHandling()
163 |     const networkError = new Error('Network request failed')
164 |     const message = hook.getUserFriendlyMessage(networkError)
                               ^
TypeError: hook.getUserFriendlyMessage is not a function. (In 'hook.getUserFriendlyMessage(networkError)', 'hook.getUserFriendlyMessage' is undefined)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:164:26)
(fail) useErrorHandling > should get user-friendly error messages
171 |     const unknownError = new Error('Unknown error')
172 | 
173 |     const recovered = await hook.handleError(unknownError, 'unknown operation')
174 | 
175 |     expect(recovered).toBe(false)
176 |     expect(hook.error).toBe('An unexpected error occurred')
                             ^
error: expect(received).toBe(expected)

Expected: "An unexpected error occurred"
Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:176:24)
(fail) useErrorHandling > should handle unknown errors
180 |     const hook = useErrorHandling()
181 |     const animationError = new Error('Animation context failed')
182 | 
183 |     const recovered = await hook.handleError(animationError, 'animation context')
184 | 
185 |     expect(recovered).toBe(true) // Should recover via fallback
                            ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:185:23)
(fail) useErrorHandling > should handle animation context errors
190 |     const balanceError = new Error('Insufficient balance')
191 | 
192 |     const recovered = await hook.handleError(balanceError, 'balance validation')
193 | 
194 |     expect(recovered).toBe(false)
195 |     expect(hook.error).toBe('Insufficient balance')
                             ^
error: expect(received).toBe(expected)

Expected: "Insufficient balance"
Received: undefined

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:195:24)
(fail) useErrorHandling > should handle balance validation errors
203 |     })
204 | 
205 |     // Start retry operation
206 |     hook.retryOperation(mockOperation, 'test retry')
207 | 
208 |     expect(hook.isRetrying).toBe(true)
                                  ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:208:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useErrorHandling.test.ts:198:47)
(fail) useErrorHandling > should manage retry state correctly [1.00ms]

packages/frontend/src/hooks/__tests__/useCaseAnimation.test.ts:

# Unhandled error between tests
-------------------------------
2 | import { renderHook, act } from '@testing-library/react'
3 | import { useCaseAnimation } from '../useCaseAnimation'
4 | import { AnimationConfig } from '../../types/caseOpening'
5 | 
6 | describe('useCaseAnimation', () => {
7 |   test('should initialize with no animation config', () => {
      ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseAnimation.test.ts:7:3)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseAnimation.test.ts:6:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:99:26)
(fail) useMobileChat > Device Detection > should detect mobile device correctly
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:110:26)
(fail) useMobileChat > Device Detection > should detect tablet device correctly
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:121:26)
(fail) useMobileChat > Device Detection > should detect desktop device correctly
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:132:26)
(fail) useMobileChat > Device Detection > should detect landscape orientation
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:149:26)
(fail) useMobileChat > Keyboard Detection > should detect keyboard open on mobile
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:159:26)
(fail) useMobileChat > Keyboard Detection > should use visual viewport API when available [1.00ms]
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:172:26)
(fail) useMobileChat > Keyboard Detection > should not detect keyboard on desktop
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:184:26)
(fail) useMobileChat > Touch Gestures > should handle swipe gestures
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:220:26)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:215:43)
(fail) useMobileChat > Touch Gestures > should handle pull to refresh
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:239:26)
(fail) useMobileChat > Touch Gestures > should handle tap outside to close
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:258:26)
(fail) useMobileChat > Responsive Utilities > should provide correct device type checks
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:269:26)
(fail) useMobileChat > Responsive Utilities > should determine when to show overlay
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:278:26)
(fail) useMobileChat > Responsive Utilities > should determine when to use bottom sheet
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:287:26)
(fail) useMobileChat > Responsive Utilities > should calculate optimal chat height
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:296:26)
(fail) useMobileChat > Responsive Utilities > should generate correct CSS classes
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:307:26)
(fail) useMobileChat > Responsive Utilities > should generate collapsed classes correctly
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:316:26)
(fail) useMobileChat > Viewport Changes > should update state on window resize
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:334:26)
(fail) useMobileChat > Viewport Changes > should update state on orientation change
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:350:26)
(fail) useMobileChat > Configuration Options > should use custom swipe threshold
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:359:26)
(fail) useMobileChat > Configuration Options > should disable pull refresh when configured
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:368:26)
(fail) useMobileChat > Configuration Options > should disable tap outside when configured [1.00ms]
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:385:26)
(fail) useMobileChat > Configuration Options > should use custom keyboard threshold
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:405:26)
(fail) useMobileChatAccessibility > Announcements > should manage announcements correctly
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:419:26)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:416:54)
(fail) useMobileChatAccessibility > Announcements > should clear announcements after timeout
437 |   describe('Focus Management', () => {
438 |     test('should focus message input', () => {
439 |       const mockInput = document.createElement('input');
440 |       mockInput.className = 'message-input';
441 |       mockInput.focus = jest.fn();
442 |       document.body.appendChild(mockInput);
                          ^
TypeError: document.body.appendChild is not a function. (In 'document.body.appendChild(mockInput)', 'document.body.appendChild' is undefined)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:442:21)
(fail) useMobileChatAccessibility > Focus Management > should focus message input
454 | 
455 |     test('should focus first message', () => {
456 |       const mockMessage = document.createElement('div');
457 |       mockMessage.className = 'chat-message';
458 |       mockMessage.focus = jest.fn();
459 |       document.body.appendChild(mockMessage);
                          ^
TypeError: document.body.appendChild is not a function. (In 'document.body.appendChild(mockMessage)', 'document.body.appendChild' is undefined)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:459:21)
(fail) useMobileChatAccessibility > Focus Management > should focus first message
473 |   describe('Keyboard Navigation', () => {
474 |     test('should handle escape key to close chat', () => {
475 |       const mockButton = document.createElement('button');
476 |       mockButton.className = 'chat-sidebar__toggle';
477 |       mockButton.click = jest.fn();
478 |       document.body.appendChild(mockButton);
                          ^
TypeError: document.body.appendChild is not a function. (In 'document.body.appendChild(mockButton)', 'document.body.appendChild' is undefined)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:478:21)
(fail) useMobileChatAccessibility > Keyboard Navigation > should handle escape key to close chat
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:495:7)
(fail) useMobileChatAccessibility > Keyboard Navigation > should set up keyboard event listeners
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:508:27)
(fail) useMobileChatAccessibility > Cleanup > should clean up event listeners on unmount
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at renderHook (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:340:7)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useMobileChat.test.ts:522:35)
(fail) useMobileChatAccessibility > Cleanup > should clear timeouts on unmount

packages/frontend/src/hooks/__tests__/useCaseOpening.test.ts:

# Unhandled error between tests
-------------------------------
2 | import { describe, test, expect, jest } from 'bun:test';
3 | import { useCaseOpening } from '../useCaseOpening'
4 | import { supabase } from '../../lib/supabase'
5 | 
6 | // Mock supabase
7 | jest.mock('../../lib/supabase', () => ({
         ^
TypeError: jest.mock is not a function. (In 'jest.mock("../../lib/supabase", () => ({
  supabase: {
    auth: {
      getSession: jest.fn()
    }
  }
}))', 'jest.mock' is undefined)
      at /home/juan/random/appgameproj/packages/frontend/src/hooks/__tests__/useCaseOpening.test.ts:7:6
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/types/__tests__/chat.test.ts:
(pass) Chat Types > ChatMessage interface > should accept valid chat message [1.00ms]
(pass) Chat Types > OnlineUser interface > should accept valid online user
(pass) Chat Types > Type guards > isChatMessage > should return true for valid chat message
(pass) Chat Types > Type guards > isChatMessage > should return false for invalid chat message
(pass) Chat Types > Type guards > isChatMessage > should return false for null or undefined
(pass) Chat Types > Type guards > isOnlineUser > should return true for valid online user
(pass) Chat Types > Type guards > isOnlineUser > should return false for invalid online user
(pass) Chat Types > Enums > should have correct MessageStatus values
(pass) Chat Types > Enums > should have correct ChatErrorType values
(pass) Chat Types > Constants > should have correct CHAT_CONFIG values
(pass) Chat Types > Component Props > should accept valid ChatSidebarProps
(pass) Chat Types > Component Props > should accept valid MessageInputProps

packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:

# Unhandled error between tests
-------------------------------
55 |   beforeEach(() => {
56 |     // Bun test automatically clears mocks
57 |   })
58 | 
59 |   describe('Login Form', () => {
60 |     test('renders login form by default', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:60:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:59:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
148 |       expect(submitButton).toBeDisabled()
149 |     })
150 |   })
151 | 
152 |   describe('Registration Form', () => {
153 |     test('switches to registration form', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:153:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:152:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
260 |       })
261 |     })
262 |   })
263 | 
264 |   describe('Password Reset', () => {
265 |     test('shows forgot password form', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:265:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:264:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
307 |       })
308 |     })
309 |   })
310 | 
311 |   describe('Form Navigation', () => {
312 |     test('switches between login and registration forms', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:312:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:311:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
336 |       expect(screen.getByText('Sign In')).toBeInTheDocument()
337 |     })
338 |   })
339 | 
340 |   describe('Accessibility', () => {
341 |     test('has proper form labels', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:341:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:340:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
367 |       })
368 |     })
369 |   })
370 | 
371 |   describe('Keyboard Navigation', () => {
372 |     test('supports tab navigation', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:372:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:371:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/auth/__tests__/AuthForm.test.tsx:54:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:

# Unhandled error between tests
-------------------------------
14 |     { id: '4', name: 'Vodka', rarity: 'rare', base_value: 500, category: 'consumables', is_active: true, created_at: '2024-01-01', updated_at: '2024-01-01' },
15 |     { id: '5', name: 'Salewa', rarity: 'uncommon', base_value: 300, category: 'medical', is_active: true, created_at: '2024-01-01', updated_at: '2024-01-01' }
16 |   ] as any[]
17 | 
18 |   describe('Mathematical Precision Tests', () => {
19 |     test('should calculate exact center positioning for all winning positions', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:19:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:18:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
62 |       }
63 |     })
64 |   })
65 | 
66 |   describe('Sequence Generation Accuracy', () => {
67 |     test('should generate sequences that pass all validation checks', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:67:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:66:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
113 |       })
114 |     })
115 |   })
116 | 
117 |   describe('User Experience Validation', () => {
118 |     test('should create realistic animation distances', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:118:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:117:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
159 |       })
160 |     })
161 |   })
162 | 
163 |   describe('Edge Case Handling', () => {
164 |     test('should handle minimum viable sequences', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:164:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:163:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
216 |       })
217 |     })
218 |   })
219 | 
220 |   describe('Performance Validation', () => {
221 |     test('should generate large sequences efficiently', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:221:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:220:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
253 |       expect(endTime - startTime).toBeLessThan(50) // Validation should be fast
254 |     })
255 |   })
256 | 
257 |   describe('Consistency Validation', () => {
258 |     test('should produce deterministic results for same inputs', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:258:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:257:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/carousel-validation.test.ts:8:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/BettingPanel.test.tsx:

# Unhandled error between tests
-------------------------------
14 |   amount: 100
15 | }
16 | 
17 | const defaultProps = {
18 |   currentBet: mockCurrentBet,
19 |   setCurrentBet: jest.fn(),
                      ^
ReferenceError: jest is not defined
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BettingPanel.test.tsx:19:18
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:

# Unhandled error between tests
-------------------------------
12 |   24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
13 | ]
14 | 
15 | describe('RouletteWheel Accuracy', () => {
16 |   describe('Base Rotation Calculation', () => {
17 |     test('calculates correct rotation for number 0 (first position)', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:17:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:16:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:15:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
54 |       expect(rotation).toBe(0) // Should return 0 for empty array
55 |     })
56 |   })
57 | 
58 |   describe('Final Rotation Calculation', () => {
59 |     test('adds minimum spins to base rotation', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:59:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:58:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:15:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
89 |       expect(finalRotation).toBe(currentRotation)
90 |     })
91 |   })
92 | 
93 |   describe('Wheel Layout Validation', () => {
94 |     test('has correct number of segments', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:94:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:93:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:15:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
113 |       expect(wheelNumbers[2]).toBe(15)  // Black 15 next to 32
114 |     })
115 |   })
116 | 
117 |   describe('Visual Alignment', () => {
118 |     test('positions winning number correctly relative to pointer', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:118:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:117:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:15:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
137 |       expect(angleDifference).toBeCloseTo(segmentAngle, 1)
138 |     })
139 |   })
140 | 
141 |   describe('Performance', () => {
142 |     test('calculates rotations quickly for all numbers', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:142:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:141:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAccuracy.test.tsx:15:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:

# Unhandled error between tests
-------------------------------
125 |       </QueryClientProvider>
126 |     )
127 |   }
128 | 
129 |   describe('Initial Loading and Animation States', () => {
130 |     test('should display loading state while fetching case types', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:130:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:129:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
173 |       expect(screen.getByText(/10,000/)).toBeInTheDocument()
174 |     })
175 |   })
176 | 
177 |   describe('Case Selection Animation', () => {
178 |     test('should animate case selection interface', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:178:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:177:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
209 |       })
210 |     })
211 |   })
212 | 
213 |   describe('Case Opening Animation Sequence', () => {
214 |     test('should show opening animation when case is opened', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:214:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:213:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
342 |       jest.useRealTimers()
343 |     })
344 |   })
345 | 
346 |   describe('Responsive Design Tests', () => {
347 |     test('should adapt to mobile viewport', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:347:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:346:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
419 |       expect(container).toBeInTheDocument()
420 |     })
421 |   })
422 | 
423 |   describe('Touch Interaction Tests', () => {
424 |     test('should handle touch events on mobile', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:424:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:423:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
456 |       expect(soundButton).toBeInTheDocument()
457 |     })
458 |   })
459 | 
460 |   describe('Error State Animations', () => {
461 |     test('should animate error messages', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:461:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:460:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
512 |       })
513 |     })
514 |   })
515 | 
516 |   describe('Performance and Animation Optimization', () => {
517 |     test('should not cause memory leaks during animations', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:517:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:516:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
548 |       })
549 |     })
550 |   })
551 | 
552 |   describe('Accessibility Tests', () => {
553 |     test('should be keyboard navigable', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:553:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:552:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
591 |       expect(screen.getByText(/Balance:/)).toBeInTheDocument()
592 |     })
593 |   })
594 | 
595 |   describe('Animation Performance Tests', () => {
596 |     test('should maintain 60fps during animations', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:596:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:595:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningAnimation.test.tsx:77:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:

# Unhandled error between tests
-------------------------------
86 |       innerHeight: 768
87 |     } as any
88 |   })
89 | 
90 |   describe('Component Structure', () => {
91 |     test('should create carousel component without errors', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:91:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:90:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:73:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
124 |       }).not.toThrow()
125 |     })
126 |   })
127 | 
128 |   describe('Animation Logic', () => {
129 |     test('should handle spinning state changes', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:129:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:128:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:73:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
161 |       expect(props.onSpinComplete).toBe(mockCallback)
162 |     })
163 |   })
164 | 
165 |   describe('Data Validation', () => {
166 |     test('should handle different item rarities', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:166:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:165:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:73:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
207 |       expect(items[winningIndex].isWinning).toBe(true)
208 |     })
209 |   })
210 | 
211 |   describe('Performance Considerations', () => {
212 |     test('should handle large item arrays', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:212:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:211:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/CaseOpeningCarousel.test.tsx:73:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:16:5)
(fail) BlackjackCard > renders a card with correct suit and value [2.00ms]
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:26:5)
(fail) BlackjackCard > renders a hidden card when isHidden is true
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:35:5)
(fail) BlackjackCard > renders empty slot when no card is provided
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:41:27)
(fail) BlackjackCard > applies correct color for red suits
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:49:27)
(fail) BlackjackCard > applies correct color for black suits
255 |     // default to document.body instead of documentElement to avoid output of potentially-large
256 |     // head elements (such as JSS style blocks) in debug output
257 |     baseElement = document.body;
258 |   }
259 |   if (!container) {
260 |     container = baseElement.appendChild(document.createElement('div'));
                                  ^
TypeError: baseElement.appendChild is not a function. (In 'baseElement.appendChild(document.createElement("div"))', 'baseElement.appendChild' is undefined)
      at render (/home/juan/random/appgameproj/node_modules/@testing-library/react/dist/pure.js:260:29)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackCard.test.tsx:57:27)
(fail) BlackjackCard > shows special border for face cards and aces

packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:

# Unhandled error between tests
-------------------------------
77 |       })
78 |     }))
79 |   })
80 | 
81 |   describe('Rendering', () => {
82 |     test('renders the roulette wheel', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:82:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:81:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
129 |       expect(screen.getByRole('button', { name: /spin/i })).toBeInTheDocument()
130 |     })
131 |   })
132 | 
133 |   describe('Betting Interface', () => {
134 |     test('allows selecting bet amount', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:134:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:133:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
192 |       expect(screen.getByText(/100/)).toBeInTheDocument() // Bet amount
193 |     })
194 |   })
195 | 
196 |   describe('Game Flow', () => {
197 |     test('disables betting during spin', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:197:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:196:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
270 |       })
271 |     })
272 |   })
273 | 
274 |   describe('Validation', () => {
275 |     test('prevents spinning without placing bets', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:275:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:274:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
320 |       expect(screen.getByText(/insufficient balance/i)).toBeInTheDocument()
321 |     })
322 |   })
323 | 
324 |   describe('Error Handling', () => {
325 |     test('handles API errors gracefully', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:325:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:324:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
363 |       })
364 |     })
365 |   })
366 | 
367 |   describe('Accessibility', () => {
368 |     test('has proper ARIA labels', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:368:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:367:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
404 |       expect(document.activeElement).toBe(spinButton)
405 |     })
406 |   })
407 | 
408 |   describe('Responsive Design', () => {
409 |     test('adapts to mobile viewport', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:409:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:408:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
434 |       expect(screen.getByTestId('desktop-roulette-layout')).toBeInTheDocument()
435 |     })
436 |   })
437 | 
438 |   describe('Game Statistics', () => {
439 |     test('displays recent winning numbers', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:439:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:438:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheel.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:

# Unhandled error between tests
-------------------------------
42 |     mockAnimate.mockClear()
43 |     mockUseAnimation.mockClear()
44 |   })
45 | 
46 |   describe('Animation Phases', () => {
47 |     test('starts continuous spinning when isSpinning=true and winningNumber=null', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:47:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:46:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:40:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
129 |       })
130 |     })
131 |   })
132 | 
133 |   describe('Animation State Changes', () => {
134 |     test('updates animation when props change from idle to spinning', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:134:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:133:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:40:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
232 |       )
233 |     })
234 |   })
235 | 
236 |   describe('Rotation Calculations', () => {
237 |     test('calculates different rotations for different winning numbers', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:237:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:236:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:40:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
279 |       expect(rotation).toBeGreaterThanOrEqual(720)
280 |     })
281 |   })
282 | 
283 |   describe('Performance', () => {
284 |     test('does not cause excessive re-animations', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:284:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:283:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/RouletteWheelAnimation.test.tsx:40:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:

# Unhandled error between tests
-------------------------------
84 |       })
85 |     }))
86 |   })
87 | 
88 |   describe('Rendering', () => {
89 |     test('renders the blackjack game interface', () => {
         ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:89:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:88:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
111 |       }
112 |     })
113 |   })
114 | 
115 |   describe('Game Start', () => {
116 |     test('starts a new game when deal cards is clicked', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:116:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:115:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
183 |       await waitFor(() => {
184 |         expect(screen.getByRole('button', { name: /hit/i })).toBeInTheDocument()
185 |       })
186 |     })
187 | 
188 |     test('allows hitting for another card', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:188:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:176:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
330 |       })
331 |     })
332 |   })
333 | 
334 |   describe('Game Results', () => {
335 |     test('displays player win result', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:335:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:334:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
475 |       })
476 |     })
477 |   })
478 | 
479 |   describe('Validation', () => {
480 |     test('validates minimum bet amount', () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:480:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:479:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
516 |       expect(screen.getByText(/insufficient balance/i)).toBeInTheDocument()
517 |     })
518 |   })
519 | 
520 |   describe('Card Display', () => {
521 |     test('displays cards with correct suits and values', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:521:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:520:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
583 |       })
584 |     })
585 |   })
586 | 
587 |   describe('Game Flow', () => {
588 |     test('allows starting new game after completion', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:588:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:587:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


# Unhandled error between tests
-------------------------------
626 |       expect(dealButton).toBeDisabled()
627 |     })
628 |   })
629 | 
630 |   describe('Accessibility', () => {
631 |     test('has proper ARIA labels for cards', async () => {
          ^
ReferenceError: test is not defined
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:631:5)
      at <anonymous> (/home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:630:3)
      at /home/juan/random/appgameproj/packages/frontend/src/components/games/__tests__/BlackjackGame.test.tsx:60:1
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/ui/__tests__/StatisticsDashboard.test.tsx:

# Unhandled error between tests
-------------------------------
4 | import StatisticsDashboard from '../StatisticsDashboard'
5 | 
6 | import { jest } from 'bun:test'
7 | 
8 | // Mock the auth hook
9 | jest.mock('../../../hooks/useAuth', () => ({
         ^
TypeError: jest.mock is not a function. (In 'jest.mock("../../../hooks/useAuth", () => ({
  useAuth: () => ({
    user: { id: "test-user-id" }
  })
}))', 'jest.mock' is undefined)
      at /home/juan/random/appgameproj/packages/frontend/src/components/ui/__tests__/StatisticsDashboard.test.tsx:9:6
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/ui/__tests__/UXEnhancements.test.tsx:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../../hooks/useToast' from '/home/juan/random/appgameproj/packages/frontend/src/components/ui/__tests__/UXEnhancements.test.tsx'
-------------------------------


packages/frontend/src/components/ui/__tests__/GameHistoryTable.test.tsx:

# Unhandled error between tests
-------------------------------
4 | import GameHistoryTable from '../GameHistoryTable'
5 | 
6 | import { jest } from 'bun:test'
7 | 
8 | // Mock the auth hook
9 | jest.mock('../../../hooks/useAuth', () => ({
         ^
TypeError: jest.mock is not a function. (In 'jest.mock("../../../hooks/useAuth", () => ({
  useAuth: () => ({
    user: { id: "test-user-id" }
  })
}))', 'jest.mock' is undefined)
      at /home/juan/random/appgameproj/packages/frontend/src/components/ui/__tests__/GameHistoryTable.test.tsx:9:6
      at loadAndEvaluateModule (2:1)
-------------------------------


packages/frontend/src/components/ui/__tests__/Toast.test.tsx:
(pass) Toast > should export Toast component [1.00ms]
(pass) Toast > should have correct toast types

packages/frontend/src/components/layout/__tests__/AppLayout.integration.test.tsx:

# Unhandled error between tests
-------------------------------
 7 | import AuthProvider from '../../providers/AuthProvider';
 8 | import ChatProvider from '../../providers/ChatProvider';
 9 | import ToastProvider from '../../providers/ToastProvider';
10 | 
11 | // Mock the hooks
12 | jest.mock('../../../hooks/useChatLayout', () => ({
          ^
TypeError: jest.mock is not a function. (In 'jest.mock("../../../hooks/useChatLayout", () => ({
  useChatLayout: () => ({
    isCollapsed: !1,
    isVisible: !0,
    toggleChat: jest.fn(),
    position: "right"
  })
}))', 'jest.mock' is undefined)
      at /home/juan/random/appgameproj/packages/frontend/src/components/layout/__tests__/AppLayout.integration.test.tsx:12:6
      at loadAndEvaluateModule (2:1)
-------------------------------


3 tests skipped:
(skip) Database Integration > should connect to database
(skip) Database Integration > should create and retrieve user profile
(skip) Database Integration > should process game transactions atomically


71 tests failed:
(fail) Case Opening Monitoring Service > Operation Recording > should record failed operations [1.00ms]
(fail) Case Opening Monitoring Service > Case Opening Specific Recording > should record successful case opening
(fail) Case Opening Monitoring Service > Case Opening Specific Recording > should record failed case opening
(fail) Case Opening Monitoring Service > Fairness Metrics > should calculate fairness metrics correctly
(fail) Case Opening Monitoring Service > System Health > should report healthy system [1.00ms]
(fail) Case Opening Monitoring Service > Currency Transaction Recording > should record failed currency transactions
(fail) Case Opening Monitoring Service > Database Operation Recording > should record failed database operations
(fail) BlackjackGame > Player Actions > should process stand action correctly
(fail) BlackjackGame > Player Actions > should handle double down correctly
(fail) BlackjackGame > Edge Cases > should handle multiple aces correctly [25.00ms]
(fail) useErrorHandling > should initialize with no error [1.00ms]
(fail) useErrorHandling > should handle network errors with retry
(fail) useErrorHandling > should handle authentication errors without retry
(fail) useErrorHandling > should handle animation errors with fallback
(fail) useErrorHandling > should handle validation errors
(fail) useErrorHandling > should retry operations successfully
(fail) useErrorHandling > should stop retrying after max attempts
(fail) useErrorHandling > should clear error
(fail) useErrorHandling > should get user-friendly error messages
(fail) useErrorHandling > should handle unknown errors
(fail) useErrorHandling > should handle animation context errors
(fail) useErrorHandling > should handle balance validation errors
(fail) useErrorHandling > should manage retry state correctly [1.00ms]
(fail) useMobileChat > Device Detection > should detect mobile device correctly
(fail) useMobileChat > Device Detection > should detect tablet device correctly
(fail) useMobileChat > Device Detection > should detect desktop device correctly
(fail) useMobileChat > Device Detection > should detect landscape orientation
(fail) useMobileChat > Keyboard Detection > should detect keyboard open on mobile
(fail) useMobileChat > Keyboard Detection > should use visual viewport API when available [1.00ms]
(fail) useMobileChat > Keyboard Detection > should not detect keyboard on desktop
(fail) useMobileChat > Touch Gestures > should handle swipe gestures
(fail) useMobileChat > Touch Gestures > should handle pull to refresh
(fail) useMobileChat > Touch Gestures > should handle tap outside to close
(fail) useMobileChat > Responsive Utilities > should provide correct device type checks
(fail) useMobileChat > Responsive Utilities > should determine when to show overlay
(fail) useMobileChat > Responsive Utilities > should determine when to use bottom sheet
(fail) useMobileChat > Responsive Utilities > should calculate optimal chat height
(fail) useMobileChat > Responsive Utilities > should generate correct CSS classes
(fail) useMobileChat > Responsive Utilities > should generate collapsed classes correctly
(fail) useMobileChat > Viewport Changes > should update state on window resize
(fail) useMobileChat > Viewport Changes > should update state on orientation change
(fail) useMobileChat > Configuration Options > should use custom swipe threshold
(fail) useMobileChat > Configuration Options > should disable pull refresh when configured
(fail) useMobileChat > Configuration Options > should disable tap outside when configured [1.00ms]
(fail) useMobileChat > Configuration Options > should use custom keyboard threshold
(fail) useMobileChatAccessibility > Announcements > should manage announcements correctly
(fail) useMobileChatAccessibility > Announcements > should clear announcements after timeout
(fail) useMobileChatAccessibility > Focus Management > should focus message input
(fail) useMobileChatAccessibility > Focus Management > should focus first message
(fail) useMobileChatAccessibility > Keyboard Navigation > should handle escape key to close chat
(fail) useMobileChatAccessibility > Keyboard Navigation > should set up keyboard event listeners
(fail) useMobileChatAccessibility > Cleanup > should clean up event listeners on unmount
(fail) useMobileChatAccessibility > Cleanup > should clear timeouts on unmount
(fail) BlackjackCard > renders a card with correct suit and value [2.00ms]
(fail) BlackjackCard > renders a hidden card when isHidden is true
(fail) BlackjackCard > renders empty slot when no card is provided
(fail) BlackjackCard > applies correct color for red suits
(fail) BlackjackCard > applies correct color for black suits
(fail) BlackjackCard > shows special border for face cards and aces

 112 pass
 3 skip
 71 fail
 315 errors
 440 expect() calls
Ran 186 tests across 80 files. [5.01s]
